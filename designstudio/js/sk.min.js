function ShowAll(){$("#sk_design_tool_box").show(),$(".sk_footer").show(),$("#sk_canvas_box").show()}function ShowHide(a){is_mobile&&(a?($("#sk_design_tool_box").show(),$(".sk_footer").show(),$("#sk_canvas_box").hide()):($("#sk_design_tool_box").hide(),$(".sk_footer").hide(),$("#sk_canvas_box").show()))}function SetHeight(){if(SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,CANVAS_HEIGHT=Math.round(SCREEN_HEIGHT-50),CANVAS_WIDTH=Math.round(.4*SCREEN_WIDTH),canvas_height=CANVAS_HEIGHT,canvas_width=SCREEN_HEIGHT/1.5,canvas_height=CANVAS_HEIGHT,$(".inner-heading").css(""),loaded_screen_width=SCREEN_WIDTH,SCREEN_WIDTH<=768?($("#sk_canvas_box").css({background:"#464543",width:SCREEN_WIDTH+"px",height:SCREEN_HEIGHT+"px"}),ShowHide(!0),canvas_height=SCREEN_HEIGHT,$(".inner-heading").css({width:SCREEN_WIDTH-150+"px"}),is_mobile=!0,SCREEN_WIDTH<=480?($(".a2a_kit_size_32").addClass("a2a_kit_size_20"),$(".a2a_kit_size_32").removeClass("a2a_kit_size_32")):($(".a2a_kit_size_32").addClass("a2a_kit_size_24"),$(".a2a_kit_size_32").removeClass("a2a_kit_size_32")),styleSet&&$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT}),$(".sk_canvas_text,.sk_font_demo, .sk_canvas_img").hide(),canvas_height=SCREEN_HEIGHT,canvas_width=canvas_height,$("#sk_canvas").attr({height:canvas_height,width:canvas_width}),$("#sk_canvas").height(canvas_height),$("#sk_canvas").width(canvas_width),$(".sk_line_scroll").height(CANVAS_HEIGHT-115),$("#div_sk_panel_main").height(CANVAS_HEIGHT-25),$("#loader").css({"margin-left":SCREEN_WIDTH/2-30+"px","margin-top":SCREEN_HEIGHT/3+"px"}),$("#sk_canvas").css({"margin-left":"-20px","margin-top":"-10px"}),$("#webgl_error").css({"margin-left":"20px","margin-top":canvas_height/5+"px"})):($(".inner-heading").css({width:"auto"}),$("#sk_canvas_box").css({background:"transparent"}),$(".action-info").css({width:"100%"}),is_mobile=!1,styleSet&&$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT}),$(".sk_canvas_text,.sk_font_demo, .sk_canvas_img").hide(),canvas_width=canvas_height,$("#sk_canvas").attr({height:canvas_height,width:canvas_width}),$("#sk_canvas_box").attr({height:canvas_height+20,width:canvas_width}),$("#sk_canvas").height(canvas_height),$("#sk_canvas_box").height(canvas_height+20),$("#sk_canvas, #sk_canvas_box").width(canvas_width),$(".sk_line_scroll").height(CANVAS_HEIGHT-185),$("#div_sk_panel_main").height(CANVAS_HEIGHT-90),$("#sk_canvas").css({"margin-left":"-20px","margin-top":"-10px"}),$("#loader").css({"margin-left":SCREEN_WIDTH-CANVAS_WIDTH/2-30+"px","margin-top":$("#sk_canvas").height()/4+"px"}),$("#webgl_error").css({"margin-left":SCREEN_WIDTH-CANVAS_WIDTH+CANVAS_WIDTH/4+"px","margin-top":$("#sk_canvas").height()/5+"px"})),is_mobile){ShowHide(!1);var b=$("#sk_canvas_box").innerWidth(),c=$("#sk_canvas_box").innerHeight(),d=(b-canvas_width)/2,e=(c-canvas_height)/2;0!=d&&$("#sk_canvas").css("margin-left",d-20+"px"),e>0&&$("#sk_canvas").css("margin-top",e+"px"),$("#sk_design_tool_box").css("width",SCREEN_WIDTH+"px")}else{ShowAll();var a=SCREEN_WIDTH-canvas_width-($("#sk_wrap").innerWidth()-$("#sk_container").innerWidth())/2-40;$("#sk_design_tool_box").css("width",a+"px")}}function SetPrice(){$("#spn_price").html("$"+(basePrice+frontLogoPrice+backLogoPrice+mascotPrice).toString())}function nearest_pow2(a){var b=Math.log(a)/Math.LN2;return 2*Math.pow(2,Math.round(b))}function LoadMeshConfig(){mesh_config_array_object=[],mesh_config_array=[],mesh_config=[],mesh_bind=[],mesh_config_array_object.S1={tshirt_body:"NAVY",tshirt_body_neck:"NAVY",short_body:"NAVY",collar:"LIME",back_logo:"mascots_19",front_logo:"mascots_19",front_logo_left:"mascots_19",mascot:"mascots_19",front_name:"front_name",front_number:"front_number",body_color:"0a1b33",team_name_bold:"normal",team_name_color:"41bf44",team_name_border:"6f7276",team_name_font:"impact",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"41bf44",player_name_border:"6f7276",player_name_font:"impact",player_name_layout:"straight",number_bold:"normal",number_color:"41bf44",number_border:"6f7276",number_font:"impact",back:"back",tertiary:"WHITE",secondary:"SILVER",primary:"LIME",back_design:"LIME"},mesh_config_array_object.S2={tshirt_body:"PURPLE",tshirt_body_neck:"PURPLE",short_body:"PURPLE",collar:"BLACK",back_logo:"mascots_19",front_logo:"mascots_19",front_logo_left:"mascots_19",mascot:"mascots_19",front_name:"front_name",front_number:"front_number",body_color:"c20101",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"f9f880",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"f9f880",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"f9f880",number_font:"sk_bold",back:"back",tertiary:"WHITE",secondary:"YELLOW",primary:"RED",back_design:"PURPLE"},mesh_config_array_object.S3={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"0a1b33",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"0a1b33",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"0a1b33",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"NAVY",primary:"RED",back_design:"RED"},mesh_config_array_object.S4={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"0a1b33",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"0a1b33",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"0a1b33",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"NAVY",primary:"RED",back_design:"RED"},mesh_config_array_object.S5={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"0a1b33",team_name_border:"c20101",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"0a1b33",player_name_border:"c20101",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"0a1b33",number_border:"c20101",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"RED",primary:"NAVY",back_design:"RED"},mesh_config_array_object.S6={tshirt_body:"ROYAL",tshirt_body_neck:"ROYAL",short_body:"ROYAL",collar:"BLACK",back_logo:"mascots_3",front_logo:"mascots_3",front_logo_left:"mascots_3",mascot:"mascots_3",front_name:"front_name",front_number:"front_number",body_color:"01347a",team_name_bold:"normal",team_name_color:"000000",team_name_border:"D1D1DC",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"000000",player_name_border:"D1D1DC",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"000000",number_border:"D1D1DC",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"WHITE",primary:"BLACK",back_design:"RED"},mesh_config_array_object.S7={tshirt_body:"PURPLE",tshirt_body_neck:"PURPLE",short_body:"PURPLE",collar:"BLACK",back_logo:"mascots_28",front_logo:"mascots_28",front_logo_left:"mascots_28",mascot:"mascots_28",front_name:"front_name",front_number:"front_number",body_color:"c20101",team_name_bold:"normal",team_name_color:"ffffff",team_name_border:"c20101",team_name_font:"sk_bold",team_name_layout:"italic",player_name_bold:"normal",player_name_color:"ffffff",player_name_border:"c20101",player_name_font:"sk_bold",player_name_layout:"italic",number_bold:"normal",number_color:"ffffff",number_border:"c20101",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"WHITE",primary:"RED",back_design:"PURPLE"},mesh_config.S1=["tshirt_inner","tshirt_body","tshirt_body_neck","short_body","collar","primary","mascot","secondary_shoulder","secondary_mascot","primary_base","back_design","front_name","front_number","back_name"],mesh_config.S2=["tshirt_inner","dot_line","mascot","neck_pattern","short_pattern","back_line","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S3=["tshirt_inner","star","mascot","secondary_plain","shoulder_pattern","shoulder_star","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S4=["tshirt_inner","chest_ring","mascot","short_pattern","shoulder_plain","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S5=["tshirt_inner","neck_pattern","mascot","short_pattern","back_line","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S6=["tshirt_inner","shoulder_plain","mascot","short_pattern","back_design","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S7=["tshirt_inner","mascot","secondary_shoulder","short_pattern","tshirt_body","tshirt_body_neck","short_body","collar_back","collar","front_name","front_number","back_name"],mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],setFontToHtml()}function LoadColorConfig(){color_config_array=[],color_config_array.BLACK={main:"000000",light:"323030",dark:"030000"},color_config_array.CARDINAL={main:"640E1B",light:"641C27",dark:"3E020B"},color_config_array.COLUMBIA={main:"7AABEC",light:"AFC8E9",dark:"0C70F4"},color_config_array.CYAN={main:"0377F9",light:"7BB4F4",dark:"0B5EBB"},color_config_array.FOREST={main:"042D21",light:"0A4E3A",dark:"032017"},color_config_array.FUCHSIA={main:"BB57A0",light:"DC6ABD",dark:"BD0D8E"},color_config_array.GOLD={main:"FFA508",light:"FED07F",dark:"CA8611"},color_config_array.GRAPHITE={main:"3b4047",light:"80868D",dark:"3B3D3F"},color_config_array.KELLY={main:"0B3C18",light:"145E28",dark:"021B08"},color_config_array.LAVENDER={main:"8E8CEF",light:"B6B5F3",dark:"514DF6"},color_config_array.LIME={main:"41bf44",light:"7BDA7D",dark:"0E8C11"},color_config_array.MAROON={main:"331218",light:"4B1117",dark:"1C070E"},color_config_array.MINT={main:"47D1A5",light:"77EBC6",dark:"10A877"},color_config_array.NAVY={main:"0A1B33",light:"10294C",dark:"061122"},color_config_array.OPTIC={main:"8DA62E",light:"A9B96C",dark:"697E19"},color_config_array.ORANGE={main:"F45F31",light:"F17246",dark:"E04205"},color_config_array.PINK={main:"E8B2FA",light:"F1DDF8",dark:"E29DF9"},color_config_array.PURPLE={main:"200D62",light:"2D1389",dark:"0D0235"},color_config_array.RED={main:"C20101",light:"EB5353",dark:"9E1818"},color_config_array.ROYAL={main:"01347A",light:"1E58A8",dark:"072650"},color_config_array["RUST-ORANGE"]={main:"8D3908",light:"A14A17",dark:"6A2A04"},color_config_array.SILVER={main:"6F7276",light:"C1C1C1",dark:"494C50"},color_config_array.TEAL={main:"02776A",light:"1AB7A6",dark:"05564D"},color_config_array.VEGAS={main:"8D855F",light:"A9A078",dark:"5A553D"},color_config_array.WHITE={main:"D1D1DC",light:"FCFBEF",dark:"F1EFC9"},color_config_array.YELLOW={main:"F9F880",light:"FAF9A0",dark:"F9F725"}}function SetCloth(){}function ShowLoader(){$("#loader").parent().show(),$("#loader").show()}function HideLoader(){$("#loader").parent().hide(),$("#loader").hide()}function LoadMesh(){if(loadedAgain||mesh_counter++,mesh_counter<mesh_bind.length){var a=mesh_bind[mesh_counter],b="media/colors/"+mesh_config_array[a]+".jpg";if("front_logo"==a||"front_logo_left"==a||"back_logo"==a||"left_mascot"==a||"right_mascot"==a?b="media/logo/"+mesh_config_array[a]+".png":"primary_base"==a||"collar_back"==a?b="media/colors/"+mesh_config_array.primary.toUpperCase()+".jpg":"back_line"==a?"S5"==loaded_style?b="media/colors/"+mesh_config_array.tertiary.toUpperCase()+"_DARK.jpg":"S2"==loaded_style&&(b="media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg"):"tshirt_inner"==a&&(b="media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg"),"front_name"==a){if(loadedAgain)loadedAgain=!1;else{var c=object.getObjectByName(a,!0);null!=c&&(CheckHideModel(c),c.children[0].name=c.name,model.add(c));var d=object.getObjectByName("front_name_left",!0);null!=d&&(CheckHideModel(d),d.children[0].name=d.name,model.add(d)),$("#txt_team_name").val("HAWKS"),loadedAgain=!0}if("S2"==loaded_style){var e=getTextArea("HAWKS",mesh_config_array.team_name_font,50);s2_name_image=new Image,s2_name_image.addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}),s2_name_image.height=e[1],s2_name_image.style.height=e[1]+"px",s2_name_image.src="media/texture/s2_name_image.png"}else FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}else if("shoulder_star"==a){var f=object.getObjectByName("shoulder_star",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var g=[{color:color_config_array[mesh_config_array.primary].dark,src:"media/texture/plain.png"}];DrawChangeImage(a,g,!0,!1)}else if("chest_ring"==a){var f=object.getObjectByName("chest_ring",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var g=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/plain.png"}];DrawChangeImage(a,g,!0,!1)}else if("neck_pattern"==a){var f=object.getObjectByName("neck_pattern",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var h=object.getObjectByName("neck_pattern_1",!0);null!=h&&(CheckHideModel(h),h.children[0].name=h.name,model.add(h));var i=object.getObjectByName("neck_pattern_2",!0);null!=i&&(CheckHideModel(i),i.children[0].name=i.name,model.add(i));var g=[];"S5"==loaded_style?g=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_3.png"}]:"S2"==loaded_style&&(g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/s2_pattern.png"}]),DrawChangeImage(a,g,!0,!1)}else if("dot_line"==a){var c=object.getObjectByName("dot_line_1",!0);null!=c&&(CheckHideModel(c),c.children[0].name=c.name,model.add(c));var j=object.getObjectByName("dot_line_2",!0);null!=j&&(CheckHideModel(j),j.children[0].name=j.name,model.add(j));var k=object.getObjectByName("dot_line_3",!0);null!=k&&(CheckHideModel(k),k.children[0].name=k.name,model.add(k));var l=object.getObjectByName("dot_line_4",!0);null!=l&&(CheckHideModel(l),l.children[0].name=l.name,model.add(l));var m=object.getObjectByName("dot_line_5",!0);null!=m&&(CheckHideModel(m),m.children[0].name=m.name,model.add(m));var g=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/s2_dot_plain.png"},{color:color_config_array[mesh_config_array.tshirt_body].main,src:"media/texture/s2_dot.png"}];DrawChangeImage(a,g,!0,!1)}else if("short_pattern"==a){var f=object.getObjectByName("left_pattern",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var n=object.getObjectByName("right_pattern",!0);null!=n&&(CheckHideModel(n),n.children[0].name=n.name,model.add(n));var g=[];"S4"==loaded_style?g=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S7"==loaded_style?g=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S5"==loaded_style?g=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S6"==loaded_style?g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short.png"}]:"S2"==loaded_style&&(g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/s2_short.png"}]),DrawChangeImage(a,g,!0,!1)}else if("secondary_shoulder"==a){var o=object.getObjectByName("shoulder_1",!0);null!=o&&(CheckHideModel(o),o.children[0].name=o.name,model.add(o));var p=object.getObjectByName("shoulder_2",!0);null!=p&&(CheckHideModel(p),p.children[0].name=p.name,model.add(p));var g=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}];DrawChangeImage(a,g,!0,!1)}else if("secondary_plain"==a){var o=object.getObjectByName("shoulder_1",!0);null!=o&&(CheckHideModel(o),o.children[0].name=o.name,model.add(o));var p=object.getObjectByName("shoulder_2",!0);null!=p&&(CheckHideModel(p),p.children[0].name=p.name,model.add(p));var g=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/plain.png"}];DrawChangeImage("secondary_shoulder",g,!0,!1)}else if("shoulder_pattern"==a){var f=object.getObjectByName("shoulder_pattern_1",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var q=object.getObjectByName("shoulder_pattern_2",!0);null!=q&&(CheckHideModel(q),q.children[0].name=q.name,model.add(q));var o=object.getObjectByName("primary_1",!0);null!=o&&(CheckHideModel(o),o.children[0].name=o.name,model.add(o));var p=object.getObjectByName("primary_2",!0);null!=p&&(CheckHideModel(p),p.children[0].name=p.name,model.add(p));var g=[{color:color_config_array[mesh_config_array.primary].dark,src:"media/texture/"+loaded_style.toLowerCase()+"_pattern_dark.png"},{color:color_config_array[mesh_config_array.primary].light,src:"media/texture/"+loaded_style.toLowerCase()+"_pattern_light.png"}];DrawChangeImage(a,g,!0,!1)}else if("star"==a){var f=object.getObjectByName("back_star",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var q=object.getObjectByName("star",!0);null!=q&&(CheckHideModel(q),q.children[0].name=q.name,model.add(q));var g=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_star.png"}];DrawChangeImage(a,g,!0,!1)}else if("mascot"==a){var f=object.getObjectByName("front_logo",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var q=object.getObjectByName("back_logo",!0);null!=q&&(CheckHideModel(q),q.children[0].name=q.name,model.add(q));var o=object.getObjectByName("left_mascot",!0);null!=o&&(CheckHideModel(o),o.children[0].name=o.name,model.add(o));var p=object.getObjectByName("right_mascot",!0);null!=p&&(CheckHideModel(p),p.children[0].name=p.name,model.add(p));var g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/logo/"+mesh_config_array.mascot+"_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/logo/"+mesh_config_array.mascot+"_2.png"}];DrawChangeImage(a,g,!0,!1)}else if("shoulder_plain"==a){var f=object.getObjectByName("shoulder_plain",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var g=[];"S6"==loaded_style?g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_shoulder.png"}]:"S7"==loaded_style?g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/plain.png"}]:"S4"==loaded_style&&(g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/plain.png"}]),DrawChangeImage(a,g,!0,!1)}else if("back_design"==a){var f=object.getObjectByName(a,!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var g=[];"S1"==loaded_style?g=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:"media/texture/"+a+"_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/"+a+"_"+loaded_style.toLowerCase()+"_light.png"}]:"S6"==loaded_style&&(g=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/"+loaded_style.toLowerCase()+"_back.png"}]),DrawChangeImage(a,g,!0,!1)}else if("front_number"==a){if(loadedAgain)loadedAgain=!1;else{var f=object.getObjectByName(a,!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var r=object.getObjectByName("front_number_left",!0);null!=r&&(CheckHideModel(r),r.children[0].name=r.name,model.add(r));var s=object.getObjectByName("back_number",!0);null!=s&&(CheckHideModel(s),s.children[0].name=s.name,model.add(s));var t=object.getObjectByName("back_number_1",!0);null!=t&&(CheckHideModel(t),t.children[0].name=t.name,model.add(t)),$("#txt_number").val("34"),loadedAgain=!0}if("S2"==loaded_style){var e=getTextArea("34",mesh_config_array.number_font,50);s2_number_image=new Image,s2_number_image.addEventListener?s2_number_image.addEventListener("load",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)},!1):s2_number_image.attachEvent&&s2_number_image.attachEvent("onload",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}),s2_number_image.height=e[1],s2_number_image.style.height=e[1]+"px",s2_number_image.src="media/texture/s2_number_image.png"}else FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}else if("back_name"==a){var u=object.getObjectByName(a,!0);null!=u&&(CheckHideModel(u),u.children[0].name=u.name,model.add(u)),$("#txt_player_name").val(""),FillTextOnLoad("","player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}else if("secondary_mascot"==a){var f=object.getObjectByName("mascot_1",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var q=object.getObjectByName("mascot_2",!0);null!=q&&(CheckHideModel(q),q.children[0].name=q.name,model.add(q));var g=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}];DrawChangeImage(a,g,!0,!1)}else if("primary"==a){var f=object.getObjectByName("primary_1",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));var q=object.getObjectByName("primary_2",!0);null!=q&&(CheckHideModel(q),q.children[0].name=q.name,model.add(q));var g=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/primary_"+loaded_style.toLowerCase()+"_mascot.png"}];DrawChangeImage(a,g,!0,!1)}else{var j=object.getObjectByName(a,!0);null!=j?THREE.ImageUtils.loadTexture(b,void 0,function(b){b.wrapS=b.wrapT=THREE.RepeatWrapping,b.anisotropy=renderer.getMaxAnisotropy(),b.magFilter=THREE.NearestFilter,b.minFilter=THREE.LinearMipMapLinearFilter;var c;c="tshirt_inner"!=a&&"tshirt_body"!=a&&"tshirt_body_neck"!=a&&"short_body"!=a&&"collar_back"!=a&&"collar"!=a&&"back_logo"!=a&&"left_mascot"!=a&&"right_mascot"!=a?getMaterial(a,b,!0):getMaterial(a,b,!1);var d=j.children[0];d.name=j.name,d.scale=j.scale,d.geometry.buffersNeedUpdate=!0,d.geometry.uvsNeedUpdate=!0,d.buffersNeedUpdate=!0,d.uvsNeedUpdate=!0,d.material.needsUpdate=!0,d.material=c,CheckHideModel(j),j.children[0].name=j.name,model.add(j),LoadMesh()}):LoadMesh()}}else mesh_counter==mesh_bind.length&&(scene.add(model),model.scale.set(scaleX,scaleY,scaleZ),model.position.set(1,3.5,1),model.traverse(function(a){"Mesh"==a.type&&(a.castShadow=!1,a.receiveShadow=!1,"back_number_1"!=a.name&&"back_name"!=a.name&&"front_name_left"!=a.name&&"front_logo"!=a.name&&"front_logo_left"!=a.name&&"front_number_left"!=a.name&&("left_mascot"!=a.name&&"right_mascot"!=a.name||(a.material.side=THREE.DoubleSide)))}),controls.dollyOut(2),controls.update(),render(),setTimeout(function(){HideLoader()},500))}function CheckHideModel(a){"back_number_1"!=a.name&&"back_name"!=a.name&&"front_name_left"!=a.name&&"front_logo"!=a.name&&"front_logo_left"!=a.name&&"front_number_left"!=a.name?a.children[0].visible=!0:a.children[0].visible=!1}function modelLoadedCallback(a){camera.zoom=1,camera.updateProjectionMatrix(),controls.update(),object=a.scene;for(var b=0,c=0,d=0,e=0,f=0,g=0,h=0;h<object.children.length;h++){var i=object.children[h],j=new THREE.Vector3;j.setFromMatrixPosition(i.matrixWorld),j.x<b?b=j.x:j.x>c&&(c=j.x),j.y<d?d=j.y:j.y>e&&(e=j.y),j.z<f?f=j.z:j.z>g&&(g=j.z)}var k=(b+c)/2,l=(d+e)/2,m=(f+g)/2,n=Math.max(k-b,c-k);n=Math.max(n,Math.max(l-d,e-l)),n=Math.max(n,Math.max(m-f,g-m)),object.position.set(-k,-l-.05,-m),firstLoad=!0,model=new THREE.Object3D,bgColor=new Image,bgColor.addEventListener?bgColor.addEventListener("load",function(){bgPlainColor?LoadMesh():(bgPlainColor=new Image,bgPlainColor.addEventListener?bgPlainColor.addEventListener("load",function(){LoadMesh()},!1):bgPlainColor.attachEvent&&bgPlainColor.attachEvent("onload",function(){LoadMesh()}),bgPlainColor.src="media/texture/blank.png")},!1):bgColor.attachEvent&&bgColor.attachEvent("onload",function(){bgPlainColor?LoadMesh():(bgPlainColor=new Image,bgPlainColor.addEventListener?bgPlainColor.addEventListener("load",function(){LoadMesh()},!1):bgPlainColor.attachEvent&&bgPlainColor.attachEvent("onload",function(){LoadMesh()}),bgPlainColor.src="media/texture/blank.png")}),bgColor.src="media/colors/"+mesh_config_array.tshirt_body+".jpg"}function installModel(a,b){console.log("MODEL NAME : "+a),isUploadedMascot=!1,isUploadedFront=!1,isUploadedBack=!1,model&&scene.remove(model),render();var c=new THREE.ColladaLoader;c.options.convertUpAxis=!0,c.load("model/"+a,modelLoadedCallback)}function createWorld(){var a;a=new THREE.DirectionalLight(16777215),a.intensity=.25,a.position.set(4,1.5,4),a.target.position.set(0,0,0),a.updateMatrixWorld(),a.target.updateMatrixWorld(),scene.add(a),a=new THREE.DirectionalLight(16777215),a.intensity=.25,a.position.set(-4,1.5,4),a.target.position.set(0,0,0),a.updateMatrixWorld(),a.target.updateMatrixWorld(),scene.add(a),a=new THREE.DirectionalLight(16777215),a.intensity=.25,a.position.set(-10,1.5,-10),a.target.position.set(0,0,0),a.updateMatrixWorld(),a.target.updateMatrixWorld(),scene.add(a),a=new THREE.DirectionalLight(16777215),a.intensity=.25,a.position.set(10,1.5,-10),a.target.position.set(0,0,0),a.updateMatrixWorld(),a.target.updateMatrixWorld(),scene.add(a),a=new THREE.HemisphereLight(16777215,10066329,.5),a.position.set(0,6,0),scene.add(a),a=new THREE.AmbientLight(8947848),a.intensity=1,scene.add(a)}function SKInitCanvas(){if(theCanvas=document.getElementById("sk_canvas"),container=document.getElementById("sk_canvas_container"),!theCanvas||!theCanvas.getContext)return void(document.getElementById("message").innerHTML="Sorry, your browser doesn't support canvas graphics.");camera=new THREE.PerspectiveCamera(40,theCanvas.width/theCanvas.height,1,1e4),camera.lookAt(new THREE.Vector3(0,0,0)),camera.position.z=200,camera.position.x=0,camera.position.y=0,scene=new THREE.Scene,renderer=new THREE.WebGLRenderer({canvas:theCanvas,alpha:!0,antialias:!0}),renderer.setSize(theCanvas.width,theCanvas.height),renderer.shadowMapEnabled=!1,renderer.shadowMapSoft=!1,renderer.setPixelRatio(2*window.devicePixelRatio),renderer.sortObjects=!1,renderer.shadowMapType=THREE.PCFSoftShadowMap,renderer.autoClear=!1,renderer.setClearColor(0),controls=GetControls(camera,renderer.domElement),windowHalfXExtra=(window.innerWidth-$("#sk_main_row").width())/2,window.addEventListener("resize",onWindowResize,!1),createWorld(),installModel(loaded_style.toUpperCase()+".js","#D1D1DC"),rotationCount=0,render()}function GetControls(a,b){var c=new THREE.OrbitControls(a,b);return c.enabled=!0,c.enableZoom=!0,c.enableRotate=!0,c.enablePan=!0,c.enableDamping=!0,c.dampingFactor=.1,c.minDistance=100,c.maxDistance=200,c.peekDistance=.3,c.minPolarAngle=Math.PI/2,c.maxPolarAngle=Math.PI/2,c}function onWindowResize(){SCREEN_WIDTH=window.innerWidth,loaded_screen_width!=SCREEN_WIDTH&&(SetHeight(),camera.aspect=canvas_width/canvas_height,camera.lookAt(new THREE.Vector3(0,0,0)),camera.updateProjectionMatrix(),renderer.setSize(canvas_width,canvas_height),controls.update(),renderer.render(scene,camera))}function animate(){requestAnimationFrame(animate),render()}function render(){model&&(model.scale.set(scaleX,scaleY,scaleZ),renderer.render(scene,camera))}function SelectColor(a){$(".div_sk_select_color_label .sk_chk_elem").remove();var b=$(a).attr("style").replace("background:",""),c=$(a).attr("data-val");$(spn_elem).attr("style","background:"+b),$(spn_elem).attr("data-val",c),$(a).prepend(chk_elem);b.replace(":","").replace(";","").replace("#","");if("body_color"==change_color_elem){ShowLoader(),mesh_config_array.body_color=b.replace(":","").replace(";","").replace("#",""),mesh_config_array.tshirt_body=c,mesh_config_array.tshirt_body_neck=c,mesh_config_array.short_body=c,ChangeMeshColor(c,"tshirt_body"),ChangeMeshColor(c+"_LIGHT","tshirt_inner"),ChangeMeshColor(c,"tshirt_body_neck"),ChangeMeshColor(c,"short_body");var e=[];bgColor=new Image,bgColor.addEventListener?bgColor.addEventListener("load",function(){"S1"==loaded_style?(e=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:"media/texture/back_design_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/back_design_"+loaded_style.toLowerCase()+"_light.png"}],DrawChangeImage("back_design",e,!0,!1)):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern","front_logo","back_logo","front_name","back_name","number"],CallDrawImage()):"S6"==loaded_style?(e=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/"+loaded_style.toLowerCase()+"_back.png"}],DrawChangeImage("back_design",e,!0,!1)):"S2"==loaded_style?(ChangeMeshColor(c,"back_line"),changeMeshArray=["dot_line"],CallDrawImage()):(HideLoader(),render())},!1):bgColor.attachEvent&&bgColor.attachEvent("onload",function(){"S1"==loaded_style?(e=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:"media/texture/back_design_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/back_design_"+loaded_style.toLowerCase()+"_light.png"}],DrawChangeImage("back_design",e,!0,!1)):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern","front_logo","back_logo","front_name","back_name","number"],CallDrawImage()):"S6"==loaded_style?(e=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:"media/texture/"+loaded_style.toLowerCase()+"_back.png"}],DrawChangeImage("back_design",e,!0,!1)):"S2"==loaded_style?(ChangeMeshColor(c,"back_line"),changeMeshArray=["dot_line"],CallDrawImage()):(HideLoader(),render())}),bgColor.src="media/colors/"+mesh_config_array.tshirt_body+".jpg"}else if("collar_color"==change_color_elem)mesh_config_array.collar=c,ChangeMeshColor(c,"collar"),HideLoader(),render();else if("primary"==change_color_elem){var e=[];mesh_config_array.primary=c,ShowLoader(),loadedAgain=!0;"S1"==loaded_style?(changeMeshArray=[],changeMeshArray.push("primary"),isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(c,"primary_base")):"S3"==loaded_style?(changeMeshArray=["shoulder_star","shoulder_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S7"==loaded_style?(changeMeshArray=["short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(c,"collar_back")):"S4"==loaded_style?(changeMeshArray=["shoulder_plain","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S6"==loaded_style?(changeMeshArray=["shoulder_plain","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S2"==loaded_style&&(changeMeshArray=["neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")),CallDrawImage()}else if("secondary"==change_color_elem){mesh_config_array.secondary=c,ShowLoader(),loadedAgain=!0;"S1"==loaded_style?(changeMeshArray=["secondary_shoulder","secondary_mascot"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(c,"primary_base")):"S3"==loaded_style?(changeMeshArray=["secondary_plain"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S4"==loaded_style?(changeMeshArray=["chest_ring","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S5"==loaded_style?(changeMeshArray=["back_line","neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S7"==loaded_style?(changeMeshArray=["secondary_shoulder","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S6"==loaded_style&&(changeMeshArray=["dot_line"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")),CallDrawImage()}else"tertiary"==change_color_elem?(mesh_config_array.tertiary=c,ShowLoader(),"S3"==loaded_style?changeMeshArray=["star"]:"S5"==loaded_style?(ChangeMeshColor(c,"back_line"),changeMeshArray=["neck_pattern","short_pattern"]):"S7"==loaded_style?changeMeshArray=["shoulder_pattern","short_pattern"]:"S4"==loaded_style&&(changeMeshArray=["short_pattern"]),CallDrawImage()):"team_name_border"==change_color_elem?(mesh_config_array.team_name_border=b.replace(":","").replace(";","").replace("#",""),FillTeamName()):"team_name_color"==change_color_elem?(mesh_config_array.team_name_color=b.replace(":","").replace(";","").replace("#",""),FillTeamName()):"player_name_color"==change_color_elem?(mesh_config_array.player_name_color=b.replace(":","").replace(";","").replace("#",""),FillPlayerName()):"player_name_border"==change_color_elem?(mesh_config_array.player_name_border=b.replace(":","").replace(";","").replace("#",""),FillPlayerName()):"number_color"==change_color_elem?(mesh_config_array.number_color=b.replace(":","").replace(";","").replace("#",""),FillNumber()):"number_border"==change_color_elem&&(mesh_config_array.number_border=b.replace(":","").replace(";","").replace("#",""),FillNumber());ShowHide(!1)}function FillTeamName(){if(loadedAgain=!0,"S2"==loaded_style){var a=mesh_config_array.team_name_layout,b=getTextArea($("#txt_team_name").val(),mesh_config_array.team_name_font,50);s2_name_image=new Image,s2_name_image.addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)});var c=b[1];"rebookends"==a||"bookends"==a?c*=1.3:"slanted"==a?c*=1.3:"arch_upper"==a?c*=.5:"arch_lower"==a?c*=1.8:"arch"==a&&(c*=.55),s2_name_image.height=c,s2_name_image.style.height=c+"px",s2_name_image.src="media/texture/s2_name_image.png"}else FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}function FillPlayerName(){if(loadedAgain=!0,"S2"==loaded_style){var a=mesh_config_array.player_name_layout,b=getTextArea($("#txt_player_name").val(),mesh_config_array.player_name_font,50);s2_name_image=new Image,s2_name_image.addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.player_name_color),FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.player_name_color),FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)});var c=b[1];"rebookends"==a||"bookends"==a?c*=1.3:"slanted"==a?c*=1.3:"arch_upper"==a?c*=.5:"arch_lower"==a?c*=1.8:"arch"==a&&(c*=.55),s2_name_image.height=c,s2_name_image.style.height=c+"px",s2_name_image.src="media/texture/s2_name_image.png"}else FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}function FillNumber(){if(loadedAgain=!0,"S2"==loaded_style){var a=getTextArea($("#txt_number").val(),mesh_config_array.number_font,50);s2_number_image=new Image,s2_number_image.addEventListener?s2_number_image.addEventListener("load",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)},!1):s2_number_image.attachEvent&&s2_number_image.attachEvent("onload",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}),s2_number_image.height=a[1],s2_number_image.style.height=a[1]+"px",s2_number_image.src="media/texture/s2_number_image.png"}else FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}function ChangeMeshColor(a,b){ShowLoader(),a=a.replace(" ","-"),mesh_config_array[b]=a;var c="media/colors/"+mesh_config_array[b]+".jpg";"front_logo"==b||"front_logo_left"==b||"back_logo"==b||"left_mascot"==b||"right_mascot"==b?c="media/logo/"+mesh_config_array[b]+".png":"primary_base"==b?c="media/colors/"+mesh_config_array.primary.toUpperCase()+".jpg":"back_line"==b&&("S5"==loaded_style?c="media/colors/"+mesh_config_array.tertiary.toUpperCase()+"_DARK.jpg":"S2"==loaded_style&&(c="media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg")),THREE.ImageUtils.loadTexture(c,void 0,function(a){a.wrapS=a.wrapT=THREE.RepeatWrapping,a.anisotropy=renderer.getMaxAnisotropy(),a.magFilter=THREE.NearestFilter,a.minFilter=THREE.LinearMipMapLinearFilter,a.needsUpdate=!0;var c=model.getObjectByName(b,!0);if(null!=c){var d;d="tshirt_inner"!=b&&"tshirt_body"!=b&&"tshirt_body_neck"!=b&&"short_body"!=b&&"collar_back"!=b&&"collar"!=b&&"back_logo"!=b&&"left_mascot"!=b&&"right_mascot"!=b?getMaterial(b,a,!0):getMaterial(b,a,!1);var e=c.children[0];e.children.length>0&&(children=children.children[0]),e.geometry.buffersNeedUpdate=!0,e.geometry.uvsNeedUpdate=!0,e.material.needsUpdate=!0,e.material=d}0==changeMeshArray.length&&HideLoader()})}function SetSelectedColor(){if($(".div_sk_select_color_label .sk_chk_elem").remove(),$(spn_elem).attr("style")){var b=($(spn_elem).attr("style").replace("background:",""),$(spn_elem).attr("data-val"));""!=b&&$(".div_sk_select_color_label[data-val='"+b+"']").prepend(chk_elem)}}function SetSelectedLogo(){if($(".a_sk_select_logo_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var a=$(spn_elem).attr("data-val");""!=a&&$(".a_sk_select_logo_label[data-val='"+a+"']").addClass("sk_fl_active")}}function SelectFont(a){loadedAgain=!0,$(".a_sk_select_font_label").removeClass("sk_fl_active");var b=$(a).attr("data-val");$(spn_elem).attr("data-val",b),$(a).addClass("sk_fl_active"),$("#sk_canvas_text").css({"font-family":b});var c=document.getElementById("sk_canvas_text"),d=c.getContext("2d");imageSmoothingEnabled(d,!0),d.clearRect(0,0,c.width,c.height),d.font="50px   "+b,"team_name"==change_font_elem?(mesh_config_array.team_name_font=b,team_name_font=b,isFilling=!0,ShowLoader(),loadedAgain=!0,setTimeout(function(){FillTeamName()},100)):"number"==change_font_elem?(isFilling=!0,mesh_config_array.number_font=b,number_font=b,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillNumber()},100)):"player_name"==change_font_elem&&(isFilling=!0,mesh_config_array.player_name_font=b,player_name_font=b,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillPlayerName()},100)),ShowHide(!1)}function SetSelectedFont(){if($(".a_sk_select_font_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var a=$(spn_elem).attr("data-val");""!=a&&$(".a_sk_select_font_label[data-val='"+a+"']").addClass("sk_fl_active")}}function SelectLogo(a){$(".a_sk_select_logo_label").removeClass("sk_fl_active");var b=$(a).attr("data-val");$(spn_elem).attr("data-val",b);var c=$(a).find(".img_sk_select_logo").attr("src");$(img_elem).attr("src",c),$(a).addClass("sk_fl_active"),"front_logo"==change_logo_elem?(frontLogoPrice=0,isUploadedFront=!1,mesh_config_array.front_logo="mascots_"+b):"back_logo"==change_logo_elem?(backLogoPrice=0,isUploadedBack=!1,mesh_config_array.back_logo="mascots_"+b):"shorts_mascot"==change_logo_elem&&(mascotPrice=0,isUploadedMascot=!1,mesh_config_array.mascot="mascots_"+b),SetPrice();var d=[{color:color_config_array[mesh_config_array.primary].main,src:"media/logo/mascots_"+b+"_1.png"}];"4"!=b&&"7"!=b&&"18"!=b&&"20"!=b&&"29"!=b&&"34"!=b&&"36"!=b&&d.push({color:color_config_array[mesh_config_array.secondary].main,src:"media/logo/mascots_"+b+"_2.png"}),ShowLoader(),DrawChangeImage(change_logo_elem,d,!1,!0),ShowHide(!1)}function SelectLayout(a){$(".a_sk_select_layout_label").removeClass("sk_fl_active");var b=$(a).attr("data-val");$(spn_elem).attr("data-val",b),$(a).addClass("sk_fl_active"),"team_name"==change_layout_elem?(mesh_config_array.team_name_layout=b,isFilling=!0,ShowLoader(),loadedAgain=!0,setTimeout(function(){FillTeamName()},100)):"player_name"==change_layout_elem&&(mesh_config_array.player_name_layout=b,isFilling=!0,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillPlayerName()},100)),ShowHide(!1)}function SetSelectedLayout(){if($(".a_sk_select_layout_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var a=$(spn_elem).attr("data-val");""!=a&&$(".a_sk_select_layout_label[data-val='"+a+"']").addClass("sk_fl_active")}}function imageSmoothingEnabled(a,b){b=!1,a.mozImageSmoothingEnabled=b,a.oImageSmoothingEnabled=b,a.webkitImageSmoothingEnabled=b,a.imageSmoothingEnabled=b}function FillTextOnLoad(a,b,c,d,e,f,g){DrawText(a,b,c,d,e,f,g);var h=document.getElementById("sk_canvas_text"),i=$("#sk_canvas_text").width(),j=$("#sk_canvas_text").height();!1!==THREE.Math.isPowerOfTwo(i)&&!1!==THREE.Math.isPowerOfTwo(j)||(i=nearest_pow2(i),j=nearest_pow2(j)),h.style.width=i+"px",h.style.height=j+"px",THREE.ImageUtils.loadTexture(h.toDataURL("image/png"),void 0,function(a){"team_name"==b?(ChangeMaterialFromCanvasLoad("front_name",h,!1,a),ChangeMaterialFromCanvasLoad("front_name_left",h,!0,a)):"number"==b?(ChangeMaterialFromCanvasLoad("front_number",h,!1,a),ChangeMaterialFromCanvasLoad("front_number_left",h,!1,a),ChangeMaterialFromCanvasLoad("back_number",h,!1,a),ChangeMaterialFromCanvasLoad("back_number_1",h,!0,a)):"player_name"==b&&ChangeMaterialFromCanvasLoad("back_name",h,!0,a)})}function ChangeMaterialFromCanvasLoad(a,b,c,d){var e=model.getObjectByName(a,!0);if(null!=e){d.wrapS=d.wrapT=THREE.RepeatWrapping,d.anisotropy=renderer.getMaxAnisotropy(),d.magFilter=THREE.NearestFilter,d.minFilter=THREE.LinearMipMapLinearFilter;var f;if(f="tshirt_inner"!=a&&"tshirt_body"!=a&&"tshirt_body_neck"!=a&&"short_body"!=a&&"collar_back"!=a&&"collar"!=a&&"back_logo"!=a&&"left_mascot"!=a&&"right_mascot"!=a?getMaterial(a,d,!0):getMaterial(a,d,!1),0==e.children.length){var g=e;g.geometry.buffersNeedUpdate=!0,g.geometry.uvsNeedUpdate=!0,g.buffersNeedUpdate=!0,g.uvsNeedUpdate=!0,g.material.needsUpdate=!0,g.material=f}else{var g=e.children[0];g.name=e.name,g.scale=e.scale,g.geometry.buffersNeedUpdate=!0,g.geometry.uvsNeedUpdate=!0,g.buffersNeedUpdate=!0,g.uvsNeedUpdate=!0,g.material.needsUpdate=!0,g.material=f}c&&LoadMesh()}else c&&LoadMesh()}function setFontToHtml(){for(var a=$(".btn_sk_font_label"),b=0;b<a.length;b++)if("team_name"==$(a[b]).attr("data-val")){var c=$(a[b]).find(".btn-label");c&&$(c).attr("data-val",mesh_config_array.team_name_font)}else if("player_name"==$(a[b]).attr("data-val")){var c=$(a[b]).find(".btn-label");c&&$(c).attr("data-val",mesh_config_array.player_name_font)}else if("number"==$(a[b]).attr("data-val")){var c=$(a[b]).find(".btn-label");c&&$(c).attr("data-val",mesh_config_array.number_font)}}function getFontFromHtml(a){for(var b="",c=$(".btn_sk_font_label"),d=0;d<c.length;d++)if($(c[d]).attr("data-val")==a){var e=$(c[d]).find(".btn-label");e&&$(e).attr("data-val")&&""!=$(e).attr("data-val")&&(b=$(e).attr("data-val"),"team_name"==a?(team_name_font=b,mesh_config_array.team_name_font=b):"player_name"==a?(player_name_font=b,mesh_config_array.player_name_font=b):"number"==a&&(number_font=b,mesh_config_array.number_font=b))}return b}function DrawText(a,b,c,d,e,f,g){void 0==c&&(c=getFontFromHtml(b));var h=50;g="normal";var j=0;"italic"==f?g="italic":"rebookends"!=f&&"bookends"!=f||(a=a.toUpperCase()),isFilling&&ShowLoader(),console.log("part : "+b+" - font : "+c),d=d.replace(":","").replace(";","").replace("#",""),e=e.replace(":","").replace(";","").replace("#",""),$("#sk_canvas_text").css({"font-family":c,"font-size":h+"px"}),styleSet&&($("#sk_canvas_text").width(CANVAS_WIDTH_TEXT),$("#sk_canvas_text").height(CANVAS_HEIGHT_TEXT)),$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT});var k=document.getElementById("sk_canvas_text");if(a.length>0){var l=getTextArea(a,c,h),m=l[0],n=l[1];n<m/4&&(n=m/4);var o=m/a.length;m+=o;var p=0;m<n&&(p=(2*n-m)/2,m=2*n);var q=m,r=n,s="center",t="middle",u=charWidth=small_font=0;if("bowtie"==f||"arch_lower"==f||"arch_upper"==f){if("bowtie"==f?j=h/(1.5*a.length):"arch_lower"!=f&&"arch_upper"!=f||(t="arch_lower"==f?"top":"bottom",j=h/(2*a.length)),a.length>2){var v=l;small_font=h;var w;for(w=0;w<a.length/2;w++)small_font-=j;var x=getTextArea(a,c,small_font);u=v[0]-x[0],charWidth=u/a.length/4,"express"!=c&&(m-=u/4)}}else"rebookends"==f||"bookends"==f?n*=1.1:"slanted"==f||"arch_lower"==f||"arch_upper"==f?(n*=1.3,m*=1.1):"arch"==f&&(t="bottom",n*=1.3);styleSet&&(k.setAttribute("width",m),k.setAttribute("height",n),k.width=m,k.height=n,k.style.width=m+"px",k.style.height=n+"px");var y=m/2,z=n/2,A=k.getContext("2d");if(imageSmoothingEnabled(A,!0),A.clearRect(0,0,k.width,k.height),A.font=g+" "+h+"px "+c,A.translate(.5,.5),A.font=g+" "+h+"px "+c,A.font=g+" "+h+"px "+c,A.miterLimit=2,A.text5Baseline=t,A.textAlign=s,"scriptjet"==c?(z-=h/4,h*=.8):"blast"==c?(y-=q/9,h*=.85):"arizona"==c?(y-=q/12,h*=.9):"speed"==c?(y-=q/12,h*=.85):"express"==c&&(y-=q/12),"number"!=b&&"straight"!=f&&"italic"!=f&&"slanted"!=f||(y=k.width/2),A.font=g+" "+h+"px "+c,A.font=g+" "+h+"px "+c,y=parseInt(y.toString().split(".")[0])+.5,"number"==b||"straight"==f||"italic"==f)A.translate(.5,.5);else if("slanted"==f){var B=-o/2;B=parseInt(B.toString().split(".")[0])+.5;var C=r/2.8;C=parseInt(C.toString().split(".")[0])+.5,A.translate(B,C)}else if("arch"==f)if("scriptjet"==c){var B=o+p;B=parseInt(B.toString().split(".")[0])+.5;var C=.8*r;C=parseInt(C.toString().split(".")[0])+.5,A.translate(B,C)}else{var B=o+p;B=parseInt(B.toString().split(".")[0])+.5;var C=r/2;C=parseInt(C.toString().split(".")[0])+.5,A.translate(B,C)}else{var D="scriptjet"==c?r/2.5:r/3,E=D;if(E=parseInt(E.toString().split(".")[0])+.5,"arch_lower"==f){var B=o+p;B=parseInt(B.toString().split(".")[0])+.5,A.translate(B,-E)}else if("arch_upper"==f){var B=o+p;B=parseInt(B.toString().split(".")[0])+.5,D="scriptjet"==c?r/1.5:r/3;var C=D;C=parseInt(C.toString().split(".")[0])+.5,A.translate(B,C)}else if("rebookends"==f){var B=o+p;B=parseInt(B.toString().split(".")[0])+.5,A.translate(B,.5)}else if("bookends"==f){var B=o+p;B=parseInt(B.toString().split(".")[0])+.5,D=r/6;var C=D;C=parseInt(C.toString().split(".")[0])+.5,A.translate(B,-C)}else{var B=o+p;B=parseInt(B.toString().split(".")[0])+.5,A.translate(B,.5)}}A.lineWidth=h/13,A.strokeStyle="#"+e,A.fillStyle="#"+d,console.log(y),A.miterLimit=2,A.textBaseline=t,A.textAlign=s;var F=charWidth2=charWidth3=0;pattern=A.createPattern(bgPlainColor,"repeat"),A.fillStyle=pattern,A.fillRect(0,0,m,n),A.strokeStyle="#"+e;var H,I="#"+d;if("S2"==loaded_style){var J=document.getElementById("sk_canvas_s2");H=A.createPattern(J,"repeat-x"),I="#"+color_config_array[mesh_config_array.tshirt_body].main}else A.fillStyle="#"+d;if("number"==b)A.fillStyle=I,A.strokeText(a,y,z),A.fillText(a,y,z),A.fillStyle=H,A.fillText(a,y,z);else if("bowtie"==f||"arch_lower"==f||"arch_upper"==f){document.getElementById("div_sk_text_1").innerHTML="",y=0;var K=h;for(A.miterLimit=2,A.textBaseline=t,A.textAlign=s,i=0;i<a.length;i++)if(console.log(y),F=getTextArea(a[i],c,h)[0],a.length>2&&""!=a[i]&&(a.length%2==0?i<a.length/2?K-=j:i>a.length/2&&(K+=j,!0):i<a.length/2?K-=j:(K+=j,!0)),A.font=K+"px "+c,A.fillStyle=I,A.strokeText(a[i],y,z),A.fillText(a[i],y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a[i],y,z)),a.length>2){F=getTextArea(a[i],c,h)[0],charWidth2=getTextArea(a[i],c,small_font)[0],charWidth3=getTextArea(a[i],c,K)[0];var L=(F+charWidth2+charWidth3)/3;F=getTextArea(a[i+1],c,h)[0],charWidth2=getTextArea(a[i+1],c,small_font)[0],charWidth3=getTextArea(a[i+1],c,K)[0];var M=(F+charWidth2+charWidth3)/3;y+=charWidth+(L+M)/2}else F=getTextArea(a[i],c,h)[0],y+=F}else if("rebookends"==f||"bookends"==f){A.miterLimit=2,A.textBaseline=t,A.textAlign=s,document.getElementById("div_sk_text_1").innerHTML="",y=0;var N=r/(3*a.length);A.miterLimit=2,A.textBaseline=t,A.textAlign=s,!0;var O=0;for("bookends"==f?(O=.05*r,O+=O*(a.length/50)):O=.15*r,z+=O,i=0;i<a.length;i++)console.log(y),a.length>2?(0!=i&&i<a.length-1&&(A.font=h+"px "+c,A.fillStyle=I,A.strokeText(a[i],y,z),A.fillText(a[i],y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a[i],y,z))),F=getTextArea(a[i],c,h)[0],charWidth2=getTextArea(a[i+1],c,h)[0],y+=(F+charWidth2)/2):(!1,A.font=h+"px "+c,A.fillStyle=I,A.strokeText(a[i],y,z),A.fillText(a[i],y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a[i],y,z)),F=getTextArea(a[i],c,h)[0],charWidth2=getTextArea(a[i+1],c,h)[0],y+=(F+charWidth2)/2);for(z-=O,A.scale(1,1.22),y=0,i=0;i<a.length;i++)console.log(y),0!=i&&i!=a.length-1||(A.font=h+"px "+c,A.fillStyle=I,A.strokeText(a[i],y,z),A.fillText(a[i],y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a[i],y,z))),F=getTextArea(a[i],c,h)[0],charWidth2=getTextArea(a[i+1],c,h)[0],y+=(F+charWidth2)/2}else if("arch"==f){A.miterLimit=2,A.textBaseline=t,A.textAlign=s,document.getElementById("div_sk_text_1").innerHTML="",y=0;var N=r/(3.5*a.length);for(A.miterLimit=2,A.textBaseline=t,A.textAlign=s,i=0;i<a.length;i++){console.log(y),a.length>2&&""!=a[i]&&(a.length%2==0?i<a.length/2?z-=N:i>a.length/2&&(z+=N):i<a.length/2?z-=N:z+=N),A.font=h+"px "+c,A.fillStyle=I,A.strokeText(a[i],y,z),A.fillText(a[i],y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a[i],y,z)),F=getTextArea(a[i],c,h)[0],charWidth2=getTextArea(a[i+1],c,h)[0];var M=(F+charWidth2+charWidth3)/3;y+=(F+charWidth2)/2}}else"slanted"==f?(A.miterLimit=2,A.textBaseline=t,A.textAlign=s,A.rotate(-8*Math.PI/180),A.fillStyle=I,A.strokeText(a,y,z),A.fillText(a,y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a,y,z))):(A.miterLimit=2,A.textBaseline=t,A.textAlign=s,A.fillStyle=I,A.strokeText(a,y,z),A.fillText(a,y,z),"S2"==loaded_style&&(A.fillStyle=H,A.fillText(a,y,z)))}}function FillTextName(a,b,c,d,e,f,g){if(DrawText(a,b,c,d,e,f,g),loadedAgain)console.log("loading again"),loadedAgain=!1,loadedOnceAgain=!0,setTimeout(function(){FillTextName(a,b,c,d,e,f,g)},100);else if(loadedOnceAgain)console.log("loading once again "+b+" with font "),loadedOnceAgain=!1,setTimeout(function(){FillTextName(a,b,c,d,e,f,g)},100);else{var h=document.getElementById("sk_canvas_text"),i=$("#sk_canvas_text").width(),j=$("#sk_canvas_text").height();!1!==THREE.Math.isPowerOfTwo(i)&&!1!==THREE.Math.isPowerOfTwo(j)||(i=nearest_pow2(i),j=nearest_pow2(j)),styleSet&&(h.style.width=i+"px",h.style.height=j+"px"),console.log("loaded "+b+" with font "+context.font);var k=new THREE.Texture;k.image=h,k.needsUpdate=!0,k.anisotropy=16,"team_name"==b?(ChangeMaterialFromCanvas("front_name",h,k),isFilling=!1,ChangeMaterialFromCanvas("front_name_left",h,k)):"number"==b?(ChangeMaterialFromCanvas("front_number",h,k),ChangeMaterialFromCanvas("front_number_left",h,k),ChangeMaterialFromCanvas("back_number_1",h,k),isFilling=!1,ChangeMaterialFromCanvas("back_number",h,k)):"player_name"==b&&(isFilling=!1,ChangeMaterialFromCanvas("back_name",h,k)),HideLoader(),render()}}function addGetTextArea(a,b,c){var d=document.getElementById("div_sk_text_1"),e=document.createElement("span");e.innerHTML=a,e.style.fontFamily=b,e.style.fontSize=c+"px",d.appendChild(e);var f=d.offsetHeight;return[d.offsetWidth,f]}function getTextArea(a,b,c){" "==a&&(a="&nbsp;");var d=document.getElementById("div_sk_text");d.innerHTML=a,d.style.fontFamily=b,d.style.fontSize=c+"px";var e=d.offsetHeight;return[d.offsetWidth,e]}function ChangeMaterialFromCanvas(a,b,c){var d=model.getObjectByName(a,!0);if(null!=d){c.wrapS=c.wrapT=THREE.RepeatWrapping,c.anisotropy=renderer.getMaxAnisotropy(),c.magFilter=THREE.NearestFilter,c.minFilter=THREE.LinearMipMapLinearFilter;var e;e="tshirt_inner"!=a&&"tshirt_body"!=a&&"tshirt_body_neck"!=a&&"short_body"!=a&&"collar"!=a&&"collar_back"!=a&&"back_logo"!=a&&"left_mascot"!=a&&"right_mascot"!=a?getMaterial(a,c,!0):getMaterial(a,c,!1);var f=d.children[0];f.name=d.name,f.scale=d.scale,f.geometry.buffersNeedUpdate=!0,f.geometry.uvsNeedUpdate=!0,f.buffersNeedUpdate=!0,f.uvsNeedUpdate=!0,f.material.needsUpdate=!0,f.material=e}calledDrawImage&&(calledDrawImage=!1,render(),HideLoader())}function hexToRgb(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:{r:0,g:0,b:0}}function DrawChangeImage(a,b,c,d){var e="sk_canvas_text1",f="sk_canvas_text2",g="sk_canvas_text3";"shoulder"==a&&(e="sk_canvas_text3"),loadedImage1=!1,loadedImage2=!1,loadedImage3=!1,loadedImage4=!1;var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage1)if(loadedImage1=!0,colorImage(h,"sk_canvas_img1",e,"#"+b[0].color),h=null,1==b.length){var i=document.getElementById(e),j=i.width,k=i.height;!1!==THREE.Math.isPowerOfTwo(j)&&!1!==THREE.Math.isPowerOfTwo(k)||(j=nearest_pow2(j),k=nearest_pow2(k));var l=document.getElementById("sk_canvas_text_sample");styleSet&&(l.setAttribute("width",j),l.setAttribute("height",k)),context=l.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,j,k),context.drawImage(i,0,0,j,k),THREE.ImageUtils.loadTexture(l.toDataURL("image/jpg"),void 0,function(b){var e=[];"secondary_shoulder"==a?(e.push("shoulder_1"),e.push("shoulder_2")):"tshirt_inner"==a?e.push("tshirt_inner"):"shoulder_plain"==a?e.push("shoulder_plain"):"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_design"==a?e.push("back_design"):"primary"==a?(e.push("primary_1"),e.push("primary_2")):"secondary_mascot"==a?(e.push("mascot_1"),e.push("mascot_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"chest_ring"==a?e.push("chest_ring"):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"star"==a?(e.push("back_star"),e.push("star")):"shoulder_star"==a?e.push("shoulder_star"):"back_line"==a?e.push("back_line"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)})}else{var m=new Image;m.addEventListener?m.addEventListener("load",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",f,"#"+b[1].color),m=null,3==b.length)if("S4"==loaded_style){var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}}),h.src=b[2].src}else{var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}}),h.src=b[2].src}else{var i=document.getElementById(e),j=document.getElementById(f),k=i.width,l=i.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",k),n.setAttribute("height",l)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(i,0,0,k,l),context.drawImage(j,0,0,k,l),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"back_design"==a?e.push("back_design"):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_line"==a?e.push("back_line"):"shoulder_pattern"==a?(e.push("shoulder_pattern_1"),e.push("shoulder_pattern_2"),e.push("primary_1"),e.push("primary_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"primary"==a&&(e.push("primary_1"),e.push("primary_2")),BindTextureToMesh(b,e,c,d)})}},!1):m.attachEvent&&m.attachEvent("onload",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",f,"#"+b[1].color),m=null,3==b.length)if("S4"==loaded_style){var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}}),h.src=b[2].src}else{var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}}),h.src=b[2].src}else{var i=document.getElementById(e),j=document.getElementById(f),k=i.width,l=i.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",k),n.setAttribute("height",l)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(i,0,0,k,l),context.drawImage(j,0,0,k,l),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"back_design"==a?e.push("back_design"):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_line"==a?e.push("back_line"):"shoulder_pattern"==a?(e.push("shoulder_pattern_1"),e.push("shoulder_pattern_2"),e.push("primary_1"),e.push("primary_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"primary"==a&&(e.push("primary_1"),e.push("primary_2")),BindTextureToMesh(b,e,c,d)})}}),m.src=b[1].src}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage1)if(loadedImage1=!0,colorImage(h,"sk_canvas_img1",e,"#"+b[0].color),h=null,1==b.length){var i=document.getElementById(e),j=i.width,k=i.height;!1!==THREE.Math.isPowerOfTwo(j)&&!1!==THREE.Math.isPowerOfTwo(k)||(j=nearest_pow2(j),k=nearest_pow2(k));var l=document.getElementById("sk_canvas_text_sample");styleSet&&(l.setAttribute("width",j),l.setAttribute("height",k)),context=l.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,j,k),context.drawImage(i,0,0,j,k),THREE.ImageUtils.loadTexture(l.toDataURL("image/jpg"),void 0,function(b){var e=[];"secondary_shoulder"==a?(e.push("shoulder_1"),e.push("shoulder_2")):"tshirt_inner"==a?e.push("tshirt_inner"):"shoulder_plain"==a?e.push("shoulder_plain"):"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_design"==a?e.push("back_design"):"primary"==a?(e.push("primary_1"),e.push("primary_2")):"secondary_mascot"==a?(e.push("mascot_1"),e.push("mascot_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"chest_ring"==a?e.push("chest_ring"):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"star"==a?(e.push("back_star"),e.push("star")):"shoulder_star"==a?e.push("shoulder_star"):"back_line"==a?e.push("back_line"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)})}else{var m=new Image;m.addEventListener?m.addEventListener("load",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",f,"#"+b[1].color),m=null,3==b.length)if("S4"==loaded_style){var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}}),h.src=b[2].src}else{var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}}),h.src=b[2].src}else{var i=document.getElementById(e),j=document.getElementById(f),k=i.width,l=i.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",k),n.setAttribute("height",l)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(i,0,0,k,l),context.drawImage(j,0,0,k,l),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"back_design"==a?e.push("back_design"):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_line"==a?e.push("back_line"):"shoulder_pattern"==a?(e.push("shoulder_pattern_1"),e.push("shoulder_pattern_2"),e.push("primary_1"),e.push("primary_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"primary"==a&&(e.push("primary_1"),e.push("primary_2")),BindTextureToMesh(b,e,c,d)})}},!1):m.attachEvent&&m.attachEvent("onload",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",f,"#"+b[1].color),m=null,3==b.length)if("S4"==loaded_style){var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var b=document.getElementById(e),h=document.getElementById(f),j=document.getElementById(g),k=b.width,l=b.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var m=document.getElementById("sk_canvas_text_sample");m.width=k,m.height=l,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(b,0,0,k,l),context.drawImage(h,0,0,k,l),context.drawImage(j,0,0,k,l),context.drawImage(i,0,0,k,l),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),i=null,BindTextureToMesh(b,e,c,d)})}}),i.src="media/texture/s4_short_4.png"}}),h.src=b[2].src}else{var h=new Image;h.addEventListener?h.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}},!1):h.attachEvent&&h.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(h,"sk_canvas_img3",g,"#"+b[2].color);var i=document.getElementById(e),j=document.getElementById(f),k=document.getElementById(g),l=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(l)&&!1!==THREE.Math.isPowerOfTwo(m)||(l=nearest_pow2(l),m=nearest_pow2(m));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",l),n.setAttribute("height",m)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,l,m),context.drawImage(i,0,0,l,m),context.drawImage(j,0,0,l,m),context.drawImage(k,0,0,l,m),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"neck_pattern"==a?(e.push("neck_pattern"),e.push("neck_pattern_1"),e.push("neck_pattern_2")):"short_pattern"==a&&(e.push("left_pattern"),e.push("right_pattern")),BindTextureToMesh(b,e,c,d)}),h=null}}),h.src=b[2].src}else{var i=document.getElementById(e),j=document.getElementById(f),k=i.width,l=i.height;!1!==THREE.Math.isPowerOfTwo(k)&&!1!==THREE.Math.isPowerOfTwo(l)||(k=nearest_pow2(k),l=nearest_pow2(l));var n=document.getElementById("sk_canvas_text_sample");styleSet&&(n.setAttribute("width",k),n.setAttribute("height",l)),context=n.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,k,l),context.drawImage(i,0,0,k,l),context.drawImage(j,0,0,k,l),THREE.ImageUtils.loadTexture(n.toDataURL("image/jpg"),void 0,function(b){var e=[];"back_design"==a?e.push("back_design"):"dot_line"==a?(e.push("dot_line_1"),e.push("dot_line_2"),e.push("dot_line_3"),e.push("dot_line_4"),e.push("dot_line_5")):"back_line"==a?e.push("back_line"):"shoulder_pattern"==a?(e.push("shoulder_pattern_1"),e.push("shoulder_pattern_2"),e.push("primary_1"),e.push("primary_2")):"mascot"==a?(e.push("front_logo"),e.push("back_logo"),e.push("left_mascot"),e.push("right_mascot")):"front_logo"==a?e.push("front_logo"):"back_logo"==a?e.push("back_logo"):"shorts_mascot"==a?(e.push("left_mascot"),e.push("right_mascot")):"primary"==a&&(e.push("primary_1"),e.push("primary_2")),BindTextureToMesh(b,e,c,d)})}}),m.src=b[1].src}}),h.src=b[0].src}function getMaterial(a,b,c){if(c){var d=["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position =   projectionMatrix *   modelViewMatrix *  vec4(position,1.0);"," }"].join("\n"),e=["uniform sampler2D texture1;","varying vec2 vUv;","void main() {"," gl_FragColor = texture2D(texture1, vUv);"," }"].join("\n"),f={},g={texture1:{type:"t",value:b}};return new THREE.ShaderMaterial({uniforms:g,attributes:f,vertexShader:d,fragmentShader:e,blending:THREE.NormalBlending,opacity:.1,fog:!c,transparent:c,alphaTest:.5,shininess:1,side:THREE.FrontSide})}var i=new THREE.MeshPhongMaterial({map:b});return i.needsUpdate=!0,i.side="tshirt_inner"==a?THREE.BackSide:THREE.DoubleSide,i.opacity=1,i.shininess=1,i.transparency=!1,i.reflectivity=0,i.alphaTest=.1,i}function BindTextureToMesh(a,b,c,d){a.wrapS=a.wrapT=THREE.RepeatWrapping,a.anisotropy=renderer.getMaxAnisotropy(),a.magFilter=THREE.NearestFilter,a.minFilter=THREE.LinearMipMapLinearFilter;var e,f;for(f=0;f<b.length;f++){var g=b[f];e="tshirt_inner"!=g&&"tshirt_body"!=g&&"tshirt_body_neck"!=g&&"short_body"!=g&&"collar_back"!=g&&"collar"!=g&&"back_logo"!=g&&"left_mascot"!=g&&"right_mascot"!=g?getMaterial(g,a,!0):getMaterial(g,a,!1);var h=model.getObjectByName(g,!0);if(null!=h){var i=h.children[0];i.name=h.name,i.scale=h.scale,i.geometry.buffersNeedUpdate=!0,i.geometry.uvsNeedUpdate=!0,i.buffersNeedUpdate=!0,i.uvsNeedUpdate=!0,i.material.needsUpdate=!0,i.material=e}}c?LoadMesh():changeMeshArray.length>1?(changeMeshArray.splice(0,1),CallDrawImage()):(render(),HideLoader())}function CallDrawImage(){calledDrawImage=!0;var a=changeMeshArray[0],b=[];if("front_logo"==a||"back_logo"==a||"shorts_mascot"==a){var c="";c="shorts_mascot"==a?mesh_config_array.mascot.replace("mascots_",""):mesh_config_array[a].replace("mascots_","");var d=color_config_array[mesh_config_array.primary].main,e=color_config_array[mesh_config_array.secondary].main;"back_logo"==a&&"S6"==loaded_style&&(d=color_config_array[mesh_config_array.secondary].main,e=color_config_array[mesh_config_array.primary].main),b=[{color:d,src:"media/logo/mascots_"+c+"_1.png"}],"4"!=c&&"7"!=c&&"18"!=c&&"20"!=c&&"29"!=c&&"34"!=c&&"36"!=c&&b.push({color:e,src:"media/logo/mascots_"+c+"_2.png"})}else"chest_ring"==a?b=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/plain.png"}]:"secondary_mascot"==a?b=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}]:"primary"==a?b="S1"==loaded_style?[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/primary_"+loaded_style.toLowerCase()+"_mascot.png"}]:[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/plain.png"}]:"secondary_plain"==a?(a="secondary_shoulder",b=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/plain.png"}]):"secondary_shoulder"==a?b=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}]:"shoulder_star"==a?b=[{color:color_config_array[mesh_config_array.primary].dark,src:"media/texture/plain.png"}]:"star"==a?b=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_star.png"}]:"shoulder_pattern"==a?b="S7"==loaded_style?[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/secondary_s7_shoulder.png"}]:[{color:color_config_array[mesh_config_array.primary].dark,src:"media/texture/"+loaded_style.toLowerCase()+"_pattern_dark.png"},{color:color_config_array[mesh_config_array.primary].light,src:"media/texture/"+loaded_style.toLowerCase()+"_pattern_light.png"}]:"neck_pattern"==a?"S5"==loaded_style?b=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_neck_3.png"}]:"S2"==loaded_style&&(b=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/s2_pattern.png"}]):"short_pattern"==a?"S4"==loaded_style?b=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S5"==loaded_style?b=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S7"==loaded_style?b=[{color:color_config_array[mesh_config_array.tertiary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S6"==loaded_style?b=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_short.png"}]:"S2"==loaded_style&&(b=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/s2_short.png"}]):"shoulder_plain"==a?"S6"==loaded_style?b=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/"+loaded_style.toLowerCase()+"_shoulder.png"}]:"S4"==loaded_style&&(b=[{color:color_config_array[mesh_config_array.primary].main,src:"media/texture/plain.png"}]):"dot_line"==a&&(b=[{color:color_config_array[mesh_config_array.secondary].main,src:"media/texture/s2_dot_plain.png"},{color:color_config_array[mesh_config_array.tshirt_body].main,src:"media/texture/s2_dot.png"}]);b.length>0?DrawChangeImage(a,b,!1,!0):"front_name"==a?FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold):"number"==a?FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold):"back_name"==a&&FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}function colorImage(a,b,c,d){var e=a.width,f=a.height;"sk_canvas_s2"!=c&&(!1!==THREE.Math.isPowerOfTwo(e)&&!1!==THREE.Math.isPowerOfTwo(f)||(e=nearest_pow2(e),f=nearest_pow2(f)));var g=document.getElementById(c);g.width=e,g.height=f;var h=g.getContext("2d");imageSmoothingEnabled(h,!0),h.clearRect(0,0,g.width,g.height),h.drawImage(a,0,0,e,f);for(var i=h.getImageData(0,0,g.width,g.height),j=i.data,k=hexToRgb(d),l=0,m=j.length;l<m;l+=4)0!=j[l+3]&&(j[l+0]=k.r,j[l+1]=k.g,j[l+2]=k.b,j[l+3]=255);h.putImageData(i,0,0)}var SCREEN_WIDTH,SCREEN_HEIGHT,CANVAS_WIDTH,CANVAS_HEIGHT,CANVAS_WIDTH_TEXT,CANVAS_HEIGHT_TEXT,canvas_height,canvas_width,loaded_screen_width,bgColor,bgPlainColor,s2_name_image,s2_number_image,isUploadedMascot=!1,isUploadedFront=!1,isUploadedBack=!1,firstLoad=!0,styleSet=!0,config=[],basePrice=69,baseFrontLogoPrice=16,baseBackLogoPrice=16,baseMascotPrice=4,frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,bodyBackgroundImage,back_view_box,spn_elem,img_elem,tname_type,pname_type,number_type,front_logo_type,back_logo_type,mascot_type,chk_elem='<img src="images/check.png" alt="selected" class="sk_chk_elem"/>',img_chk_elem='<div class="style_check"> <img src="images/check.png" alt="selected" /> </div>',change_color_type,border_color_type,mesh_counter,fabric_cloth,tshirt_body,short_body,collar,change_layout_elem,change_color_elem,change_font_elem,change_logo_elem,change_color_elem_color,loaded_style="S1",isFilling=!0,is_mobile=!1,loadedAgain=!1,loadedOnceAgain=!1,model_zoomed=!1,font_change_array,team_name_font,player_name_font,number_font,mY=0,loadedImage1,loadedImage2,loadedImage3,loadedImage4,changeMeshArray=[],mesh_config_array,mesh_config_array_object,color_config_array,calledDrawImage=!1,mesh_bind,mesh_config,scaleX=93,scaleY=72,scaleZ=75,windowHalfXExtra,theCanvas,container,controls,camera,scene,renderer,cross,model;$(document).ready(function(){LoadColorConfig(),LoadMeshConfig(),fabric_cloth="dri_feel",mesh_counter=-1,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",mascot_type="full_front",back_logo_type="upper_back",back_view_box="div_sk_panel_main",loaded_screen_width=0,CANVAS_HEIGHT_TEXT=600,CANVAS_WIDTH_TEXT=512,SetHeight(),IsWebGL()&&($("#txt_team_name").on("input",function(){FillTeamName()}),$("#txt_player_name").on("input",function(){FillPlayerName()}),$("#btn_open").click(function(){ShowHide(!0)}),$("#btn_close").click(function(){ShowHide(!1)}),$("#txt_number").on("input",function(){var a=$(this).val();a.length>3&&$(this).val(a.substring(0,3)),FillNumber()}),$(".a_sk_action").click(function(){var a=$(this).attr("data-val");console.log(a),"back"==a?($(".sk_other_box").hide(),$("#"+back_view_box).show(),back_view_box="div_sk_panel_main"):($("#div_sk_panel_main").hide(),$("#div_sk_panel_"+a).show(),"team_name"==a?($('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked")):"player_name"==a?($('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked")):"number"==a?($('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked")):"front_logo"==a?($('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked")):"back_logo"==a?($('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked")):"shorts_mascot"==a&&($('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked")))}),$(".div_sk_style_label_img").click(function(){var a=$(this).next().attr("data-val");a!==loaded_style&&($("#div_sk_panel_style").find(".style_check").remove(),$(this).prepend(img_chk_elem),frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,SetPrice(),$(".div_sk_style_label").removeClass("style-lable_active").addClass("style-lable"),$(this).next().addClass("style-lable_active"),loaded_style=a,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",back_logo_type="upper_back",mascot_type="full_front",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked"),mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],ShowLoader(),mesh_counter=-1,ShowHide(!1),installModel(loaded_style.toUpperCase()+".js","#D1D1DC"))}),$(".div_sk_style_label").click(function(){var a=$(this).attr("data-val");if(a!==loaded_style){$("#div_sk_panel_style").find(".style_check").remove();var b=$(this).parent().children()[0];$(b).prepend(img_chk_elem),frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,SetPrice(),$(".div_sk_style_label").removeClass("style-lable_active").addClass("style-lable"),$(this).addClass("style-lable_active"),loaded_style=a,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",back_logo_type="upper_back",mascot_type="full_front",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked"),mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],ShowLoader(),mesh_counter=-1,ShowHide(!1),installModel(loaded_style.toUpperCase()+".js","#D1D1DC")}}),$(".div_sk_fabric_label").click(function(){var a=$(this).attr("data-val");if(fabric_cloth!=a){$("#div_sk_panel_fabric").find(".style_check").remove(),$(".div_sk_fabric_label").removeClass("style-lable_active").addClass("style-lable"),$(this).addClass("style-lable_active");var b=$(this).parent().children()[0];$(b).prepend(img_chk_elem),fabric_cloth=a,SetCloth()}}),$(".div_sk_fabric_label_img").click(function(){var a=$(this).attr("data-val");fabric_cloth!=a&&($("#div_sk_panel_fabric").find(".style_check").remove(),$(".div_sk_fabric_label").removeClass("style-lable_active").addClass("style-lable"),$(this).prepend(img_chk_elem),$(this).next().addClass("style-lable_active"),fabric_cloth=a,SetCloth())}),$(".btn_sk_color_label").click(function(){back_view_box="div_sk_panel_colors",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_colors").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_team_name_label").click(function(){back_view_box="div_sk_panel_team_name",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_team_name").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_player_name_label").click(function(){back_view_box="div_sk_panel_player_name",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_player_name").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_number_label").click(function(){back_view_box="div_sk_panel_number",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_number").hide(),$("#div_sk_panel_select_colors").show()}),$(".div_sk_select_color_label").click(function(){SelectColor(this)}),$('input[name="rdo_back_logo"]').change(function(){back_logo_type=$(this).val();var a=model.getObjectByName("back_name",!0),b=model.getObjectByName("back_logo",!0),c=model.getObjectByName("back_number",!0),d=model.getObjectByName("back_number_1",!0);if(""==back_logo_type){if(null!=b){var e=b.children[0];e.visible=!1}if(null!=c){var e=c.children[0];e.visible=!0}if(null!=d){var e=d.children[0];e.visible=!1}}else if("upper_back"==back_logo_type){if(pname_type="",$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),null!=a){var f=a.children[0];f.visible=!1}if(null!=b){var e=b.children[0];e.visible=!0}if(null!=c){var e=c.children[0];e.visible=!0}if(null!=d){var e=d.children[0];e.visible=!1}}render()}),$('input[name="rdo_shorts_mascot"]').change(function(){mascot_type=$(this).val();var a=model.getObjectByName("left_mascot",!0),b=model.getObjectByName("right_mascot",!0);if(""==mascot_type){if(null!=a){var c=a.children[0];c.visible=!1}if(null!=b){var d=b.children[0];d.visible=!1}}else if("full_front"==mascot_type){if(null!=a){var c=a.children[0];c.visible=!0}if(null!=b){var d=b.children[0];d.visible=!0}}render()}),$('input[name="rdo_front_logo"]').change(function(){front_logo_type=$(this).val();var a=model.getObjectByName("front_name",!0),b=model.getObjectByName("front_name_left",!0),c=model.getObjectByName("front_logo",!0);if(""==front_logo_type){if(null!=c){var d=c.children[0];d.visible=!1}}else if("full_front"==front_logo_type){if(tname_type="",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),null!=a){var e=a.children[0];e.visible=!1}if(null!=b){var f=b.children[0];f.visible=!1}if(null!=c){var d=c.children[0];d.visible=!0}}render()}),$('input[name="rdo_tname"]').change(function(){tname_type=$(this).val();var a=model.getObjectByName("front_name",!0),b=model.getObjectByName("front_name_left",!0),c=model.getObjectByName("front_logo",!0),d=model.getObjectByName("front_logo_left",!0);if(""==tname_type){if(null!=a){var e=a.children[0];e.visible=!1}if(null!=b){var f=b.children[0];f.visible=!1}}else if("full_front"==tname_type){if(front_logo_type="",$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),null!=a){var e=a.children[0];e.visible=!0}if(null!=b){var f=b.children[0];f.visible=!1}if(null!=c){var g=c.children[0];g.visible=!1}if(null!=d){var h=d.children[0];h.visible=!1}}else if("left_chest"==tname_type){if(front_logo_type="",$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),null!=a){var e=a.children[0];e.visible=!1}if(null!=b){var f=b.children[0];f.visible=!0}if(null!=c){var g=c.children[0];g.visible=!1}if(null!=d){var h=d.children[0];h.visible=!1}}render()}),$('input[name="rdo_pname"]').change(function(){pname_type=$(this).val();var a=model.getObjectByName("back_name",!0),b=model.getObjectByName("back_logo",!0),c=model.getObjectByName("back_number",!0),d=model.getObjectByName("back_number_1",!0);if(""==pname_type){if(null!=a){var e=a.children[0];e.visible=!1}if(""!=number_type){if(null!=c){var f=c.children[0];f.visible=!0}if(null!=d){var f=d.children[0];f.visible=!1}}}else if("upper_back"==pname_type){if(back_logo_type="",$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),null!=a){var e=a.children[0];e.visible=!0}if(null!=b){var g=b.children[0];g.visible=!1}if("S7"==loaded_style&&""!=number_type){if(null!=c){var f=c.children[0];f.visible=!1}if(null!=d){var h=d.children[0];h.visible=!0}}}render()}),$('input[name="rdo_number"]').change(function(){number_type=$(this).val();var a=model.getObjectByName("front_number",!0),b=model.getObjectByName("front_number_left",!0),c=model.getObjectByName("back_number",!0),d=model.getObjectByName("back_number_1",!0);if(""==number_type){if(null!=a){var e=a.children[0];e.visible=!1}if(null!=b){var f=b.children[0];f.visible=!1}if(null!=c){var g=c.children[0];g.visible=!1}if(null!=d){var g=d.children[0];g.visible=!1}}else if("under"==number_type){if(null!=a){var e=a.children[0];e.visible=!0}if(null!=b){var f=b.children[0];f.visible=!1}if("S7"==loaded_style)if(""==pname_type){if(null!=c){var g=c.children[0];g.visible=!0}if(null!=d){var g=d.children[0];g.visible=!1}}else{if(null!=c){var g=c.children[0];g.visible=!1}if(null!=d){var g=d.children[0];g.visible=!0}}else if(null!=c){var g=c.children[0];g.visible=!0}}else if("heart"==number_type){if(null!=a){var e=a.children[0];e.visible=!1}if(null!=b){var f=b.children[0];f.visible=!0}if("S7"==loaded_style)if(""==pname_type){if(null!=c){var g=c.children[0];g.visible=!0}if(null!=d){var g=d.children[0];g.visible=!1}}else{if(null!=c){var g=c.children[0];g.visible=!1}if(null!=d){var g=d.children[0];g.visible=!0}}else if(null!=c){var g=c.children[0];g.visible=!0}}render()}),$(".btn_sk_font_label").click(function(){var a=$(this).attr("data-val");change_font_elem=a,"team_name"==a?($("#img_select_font").attr("src","images/team.png"),$("#headin_select_font").html("Team Name > Fonts")):"player_name"==a?($("#img_select_font").attr("src","images/player.png"),$("#headin_select_font").html("Player Name > Fonts")):"number"==a&&($("#img_select_font").attr("src","images/number.png"),$("#headin_select_font").html("Number > Fonts")),back_view_box="div_sk_panel_"+a,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedFont(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_fonts").show()}),$(".font-pick>ul>li").click(function(){SelectFont($(this).find(".a_sk_select_font_label"))}),$(".btn_sk_logo_label").click(function(){var a=$(this).attr("data-val");change_logo_elem=a,img_elem=$("#img_preview_"+a),"front_logo"==a?($("#img_select_logo").attr("src","images/front_logo.png"),$(img_elem).attr("src","images/"+mesh_config_array.front_logo+".jpg")):"back_logo"==a?($("#img_select_logo").attr("src","images/back_logo.png"),$(img_elem).attr("src","images/"+mesh_config_array.back_logo+".jpg")):"shorts_mascot"==a&&($("#img_select_logo").attr("src","images/shorts.png"),$(img_elem).attr("src","images/"+mesh_config_array.mascot+".jpg")),back_view_box="div_sk_panel_"+a,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedLogo(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_logo").show()}),$(".a_sk_select_logo_label").click(function(){SelectLogo(this)}),$(".btn_sk_layout_label").click(function(){change_layout_elem=$(this).attr("data-val"),"team_name"==change_layout_elem?($("#img_select_layout").attr("src","images/team.png"),$("#headin_select_layout").html("Team Name > Layout")):"player_name"==change_layout_elem&&($("#img_select_layout").attr("src","images/player.png"),$("#headin_select_layout").html("Player Name > Layout")),back_view_box="div_sk_panel_"+change_layout_elem,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedLayout(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_layout").show()}),$(".a_sk_select_layout_label").click(function(){SelectLayout(this)}),$('input[type="file"]').change(function(){if(console.log($(this).attr("data-val")),console.log($(this).val()),void 0===window.FileReader)alert("Browser does not support HTML5 file uploads!");else if(change_logo_elem=$(this).attr("data-val"),this.files&&this.files[0]){var a=new FileReader;a.addEventListener?a.addEventListener("load",function(a){"shorts_mascot"==change_logo_elem?(mascotPrice=baseMascotPrice,isUploadedMascot=!0):"front_logo"==change_logo_elem?(frontLogoPrice=baseFrontLogoPrice,isUploadedFront=!0):"back_logo"==change_logo_elem&&(backLogoPrice=baseBackLogoPrice,isUploadedBack=!0),SetPrice();var b=new Image;b.addEventListener?b.addEventListener("load",function(){var a=b.width,c=b.height;!1!==THREE.Math.isPowerOfTwo(a)&&!1!==THREE.Math.isPowerOfTwo(c)||(a=nearest_pow2(a),c=nearest_pow2(c));var d=document.getElementById("sk_canvas_text");styleSet&&(d.setAttribute("width",a),d.setAttribute("height",c));var e=d.getContext("2d");imageSmoothingEnabled(e,!0),pattern=e.createPattern(bgPlainColor,"repeat"),e.fillStyle=pattern,e.fillRect(0,0,a,c),e.drawImage(b,0,0,a,c),$("#img_preview_"+change_logo_elem).attr("src",d.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){ShowHide(!1);var b=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(b=["left_mascot","right_mascot"]),BindTextureToMesh(a,b,!1,!0)})},!1):b.attachEvent&&b.attachEvent("onload",function(){var a=b.width,c=b.height;!1!==THREE.Math.isPowerOfTwo(a)&&!1!==THREE.Math.isPowerOfTwo(c)||(a=nearest_pow2(a),c=nearest_pow2(c));var d=document.getElementById("sk_canvas_text");styleSet&&(d.setAttribute("width",a),d.setAttribute("height",c));var e=d.getContext("2d");imageSmoothingEnabled(e,!0),pattern=e.createPattern(bgPlainColor,"repeat"),e.fillStyle=pattern,e.fillRect(0,0,a,c),e.drawImage(b,0,0,a,c),$("#img_preview_"+change_logo_elem).attr("src",d.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){ShowHide(!1);var b=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(b=["left_mascot","right_mascot"]),BindTextureToMesh(a,b,!1,!0)})}),b.src=a.target.result},!1):a.attachEvent&&a.attachEvent("onload",function(a){"shorts_mascot"==change_logo_elem?(mascotPrice=baseMascotPrice,isUploadedMascot=!0):"front_logo"==change_logo_elem?(frontLogoPrice=baseFrontLogoPrice,isUploadedFront=!0):"back_logo"==change_logo_elem&&(backLogoPrice=baseBackLogoPrice,isUploadedBack=!0),SetPrice();var b=new Image;b.addEventListener?b.addEventListener("load",function(){b.removeEventListener("load",this,!1),ShowHide(!1);var a=b.width,c=b.height;!1!==THREE.Math.isPowerOfTwo(a)&&!1!==THREE.Math.isPowerOfTwo(c)||(a=nearest_pow2(a),c=nearest_pow2(c));var d=document.getElementById("sk_canvas_text");styleSet&&(d.setAttribute("width",a),d.setAttribute("height",c));var e=d.getContext("2d");imageSmoothingEnabled(e,!0),pattern=e.createPattern(bgPlainColor,"repeat"),e.fillStyle=pattern,e.fillRect(0,0,a,c),e.drawImage(b,0,0,a,c),$("#img_preview_"+change_logo_elem).attr("src",d.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){var b=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(b=["left_mascot","right_mascot"]),BindTextureToMesh(a,b,!1,!0)})},!1):b.attachEvent&&b.attachEvent("onload",function(){ShowHide(!1);var a=b.width,c=b.height;!1!==THREE.Math.isPowerOfTwo(a)&&!1!==THREE.Math.isPowerOfTwo(c)||(a=nearest_pow2(a),c=nearest_pow2(c));var d=document.getElementById("sk_canvas_text");styleSet&&(d.setAttribute("width",a),d.setAttribute("height",c));var e=d.getContext("2d");imageSmoothingEnabled(e,!0),pattern=e.createPattern(bgPlainColor,"repeat"),e.fillStyle=pattern,e.fillRect(0,0,a,c),e.drawImage(b,0,0,a,c),$("#img_preview_"+change_logo_elem).attr("src",d.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){var b=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(b=["left_mascot","right_mascot"]),BindTextureToMesh(a,b,!1,!0)})}),b.src=a.target.result}),a.readAsDataURL(this.files[0])}}),SKInitCanvas(),animate())});