function ShowAll(){$("#sk_design_tool_box").show(),$(".sk_footer").show(),$("#sk_canvas_box").show()}function ShowHide(e){is_mobile&&(e?($("#sk_design_tool_box").show(),$(".sk_footer").show(),$("#sk_canvas_box").hide()):($("#sk_design_tool_box").hide(),$(".sk_footer").hide(),$("#sk_canvas_box").show()))}function SetHeight(){if(SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,CANVAS_HEIGHT=Math.round(SCREEN_HEIGHT-50),CANVAS_WIDTH=Math.round(.4*SCREEN_WIDTH),canvas_height=CANVAS_HEIGHT,canvas_width=SCREEN_HEIGHT/1.5,canvas_height=CANVAS_HEIGHT,$(".inner-heading").css(""),loaded_screen_width=SCREEN_WIDTH,SCREEN_WIDTH<=768?($("#sk_canvas_box").css({background:"#464543",width:SCREEN_WIDTH+"px",height:SCREEN_HEIGHT+"px"}),ShowHide(!0),canvas_height=SCREEN_HEIGHT,$(".inner-heading").css({width:SCREEN_WIDTH-150+"px"}),is_mobile=!0,SCREEN_WIDTH<=480?($(".a2a_kit_size_32").addClass("a2a_kit_size_20"),$(".a2a_kit_size_32").removeClass("a2a_kit_size_32")):($(".a2a_kit_size_32").addClass("a2a_kit_size_24"),$(".a2a_kit_size_32").removeClass("a2a_kit_size_32")),styleSet&&$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT}),$(".sk_canvas_text,.sk_font_demo, .sk_canvas_img").hide(),canvas_width=canvas_height=SCREEN_HEIGHT,$("#sk_canvas").attr({height:canvas_height,width:canvas_width}),$("#sk_canvas").height(canvas_height),$("#sk_canvas").width(canvas_width),$(".sk_line_scroll").height(CANVAS_HEIGHT-115),$("#div_sk_panel_main").height(CANVAS_HEIGHT-25),$("#loader").css({"margin-left":SCREEN_WIDTH/2-30+"px","margin-top":SCREEN_HEIGHT/3+"px"}),$("#sk_canvas").css({"margin-left":"-20px","margin-top":"-10px"}),$("#webgl_error").css({"margin-left":"20px","margin-top":canvas_height/5+"px"})):($(".inner-heading").css({width:"auto"}),$("#sk_canvas_box").css({background:"transparent"}),$(".action-info").css({width:"100%"}),is_mobile=!1,styleSet&&$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT}),$(".sk_canvas_text,.sk_font_demo, .sk_canvas_img").hide(),canvas_width=canvas_height,$("#sk_canvas").attr({height:canvas_height,width:canvas_width}),$("#sk_canvas_box").attr({height:canvas_height+20,width:canvas_width}),$("#sk_canvas").height(canvas_height),$("#sk_canvas_box").height(canvas_height+20),$("#sk_canvas, #sk_canvas_box").width(canvas_width),$(".sk_line_scroll").height(CANVAS_HEIGHT-185),$("#div_sk_panel_main").height(CANVAS_HEIGHT-90),$("#sk_canvas").css({"margin-left":"-20px","margin-top":"-10px"}),$("#loader").css({"margin-left":SCREEN_WIDTH-CANVAS_WIDTH/2-30+"px","margin-top":$("#sk_canvas").height()/4+"px"}),$("#webgl_error").css({"margin-left":SCREEN_WIDTH-CANVAS_WIDTH+CANVAS_WIDTH/4+"px","margin-top":$("#sk_canvas").height()/5+"px"})),is_mobile){ShowHide(!1);var e=$("#sk_canvas_box").innerWidth(),a=$("#sk_canvas_box").innerHeight(),t=(e-canvas_width)/2,o=(a-canvas_height)/2;0!=t&&$("#sk_canvas").css("margin-left",t-20+"px"),o>0&&$("#sk_canvas").css("margin-top",o+"px"),$("#sk_design_tool_box").css("width",SCREEN_WIDTH+"px")}else{ShowAll();var n=SCREEN_WIDTH-canvas_width-($("#sk_wrap").innerWidth()-$("#sk_container").innerWidth())/2-40;$("#sk_design_tool_box").css("width",n+"px")}}function SetPrice(){$("#spn_price").html("$"+(basePrice+frontLogoPrice+backLogoPrice+mascotPrice).toString())}function nearest_pow2(e){var a=Math.log(e)/Math.LN2;return 2*Math.pow(2,Math.round(a))}function LoadMeshConfig(){mesh_config_array=[],mesh_config=[],mesh_bind=[],(mesh_config_array_object=[]).S1={tshirt_body:"NAVY",tshirt_body_neck:"NAVY",short_body:"NAVY",collar:"LIME",back_logo:"mascots_19",front_logo:"mascots_19",front_logo_left:"mascots_19",mascot:"mascots_19",front_name:"front_name",front_number:"front_number",body_color:"0a1b33",team_name_bold:"normal",team_name_color:"41bf44",team_name_border:"6f7276",team_name_font:"impact",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"41bf44",player_name_border:"6f7276",player_name_font:"impact",player_name_layout:"straight",number_bold:"normal",number_color:"41bf44",number_border:"6f7276",number_font:"impact",back:"back",tertiary:"WHITE",secondary:"SILVER",primary:"LIME",back_design:"LIME"},mesh_config_array_object.S2={tshirt_body:"PURPLE",tshirt_body_neck:"PURPLE",short_body:"PURPLE",collar:"BLACK",back_logo:"mascots_19",front_logo:"mascots_19",front_logo_left:"mascots_19",mascot:"mascots_19",front_name:"front_name",front_number:"front_number",body_color:"c20101",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"f9f880",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"f9f880",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"f9f880",number_font:"sk_bold",back:"back",tertiary:"WHITE",secondary:"YELLOW",primary:"RED",back_design:"PURPLE"},mesh_config_array_object.S3={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"0a1b33",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"0a1b33",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"0a1b33",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"NAVY",primary:"RED",back_design:"RED"},mesh_config_array_object.S4={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"c20101",team_name_border:"0a1b33",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"c20101",player_name_border:"0a1b33",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"c20101",number_border:"0a1b33",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"NAVY",primary:"RED",back_design:"RED"},mesh_config_array_object.S5={tshirt_body:"WHITE",tshirt_body_neck:"WHITE",short_body:"WHITE",collar:"BLACK",back_logo:"mascots_9",front_logo:"mascots_9",front_logo_left:"mascots_9",mascot:"mascots_9",front_name:"front_name",front_number:"front_number",body_color:"D1D1DC",team_name_bold:"normal",team_name_color:"0a1b33",team_name_border:"c20101",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"0a1b33",player_name_border:"c20101",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"0a1b33",number_border:"c20101",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"RED",primary:"NAVY",back_design:"RED"},mesh_config_array_object.S6={tshirt_body:"ROYAL",tshirt_body_neck:"ROYAL",short_body:"ROYAL",collar:"BLACK",back_logo:"mascots_3",front_logo:"mascots_3",front_logo_left:"mascots_3",mascot:"mascots_3",front_name:"front_name",front_number:"front_number",body_color:"01347a",team_name_bold:"normal",team_name_color:"000000",team_name_border:"D1D1DC",team_name_font:"sk_bold",team_name_layout:"straight",player_name_bold:"normal",player_name_color:"000000",player_name_border:"D1D1DC",player_name_font:"sk_bold",player_name_layout:"straight",number_bold:"normal",number_color:"000000",number_border:"D1D1DC",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"WHITE",primary:"BLACK",back_design:"RED"},mesh_config_array_object.S7={tshirt_body:"PURPLE",tshirt_body_neck:"PURPLE",short_body:"PURPLE",collar:"BLACK",back_logo:"mascots_28",front_logo:"mascots_28",front_logo_left:"mascots_28",mascot:"mascots_28",front_name:"front_name",front_number:"front_number",body_color:"c20101",team_name_bold:"normal",team_name_color:"ffffff",team_name_border:"c20101",team_name_font:"sk_bold",team_name_layout:"italic",player_name_bold:"normal",player_name_color:"ffffff",player_name_border:"c20101",player_name_font:"sk_bold",player_name_layout:"italic",number_bold:"normal",number_color:"ffffff",number_border:"c20101",number_font:"sk_bold",back:"back",tertiary:"SILVER",secondary:"WHITE",primary:"RED",back_design:"PURPLE"},mesh_config.S1=["tshirt_inner","tshirt_body","tshirt_body_neck","short_body","collar","primary","mascot","secondary_shoulder","secondary_mascot","primary_base","back_design","front_name","front_number","back_name"],mesh_config.S2=["tshirt_inner","dot_line","mascot","neck_pattern","short_pattern","back_line","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S3=["tshirt_inner","star","mascot","secondary_plain","shoulder_pattern","shoulder_star","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S4=["tshirt_inner","chest_ring","mascot","short_pattern","shoulder_plain","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S5=["tshirt_inner","neck_pattern","mascot","short_pattern","back_line","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S6=["tshirt_inner","shoulder_plain","mascot","short_pattern","back_design","tshirt_body","tshirt_body_neck","short_body","collar","front_name","front_number","back_name"],mesh_config.S7=["tshirt_inner","mascot","secondary_shoulder","short_pattern","tshirt_body","tshirt_body_neck","short_body","collar_back","collar","front_name","front_number","back_name"],mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],setFontToHtml()}function LoadColorConfig(){(color_config_array=[]).BLACK={main:"000000",light:"323030",dark:"030000"},color_config_array.CARDINAL={main:"640E1B",light:"641C27",dark:"3E020B"},color_config_array.COLUMBIA={main:"7AABEC",light:"AFC8E9",dark:"0C70F4"},color_config_array.CYAN={main:"0377F9",light:"7BB4F4",dark:"0B5EBB"},color_config_array.FOREST={main:"042D21",light:"0A4E3A",dark:"032017"},color_config_array.FUCHSIA={main:"BB57A0",light:"DC6ABD",dark:"BD0D8E"},color_config_array.GOLD={main:"FFA508",light:"FED07F",dark:"CA8611"},color_config_array.GRAPHITE={main:"3b4047",light:"80868D",dark:"3B3D3F"},color_config_array.KELLY={main:"0B3C18",light:"145E28",dark:"021B08"},color_config_array.LAVENDER={main:"8E8CEF",light:"B6B5F3",dark:"514DF6"},color_config_array.LIME={main:"41bf44",light:"7BDA7D",dark:"0E8C11"},color_config_array.MAROON={main:"331218",light:"4B1117",dark:"1C070E"},color_config_array.MINT={main:"47D1A5",light:"77EBC6",dark:"10A877"},color_config_array.NAVY={main:"0A1B33",light:"10294C",dark:"061122"},color_config_array.OPTIC={main:"8DA62E",light:"A9B96C",dark:"697E19"},color_config_array.ORANGE={main:"F45F31",light:"F17246",dark:"E04205"},color_config_array.PINK={main:"E8B2FA",light:"F1DDF8",dark:"E29DF9"},color_config_array.PURPLE={main:"200D62",light:"2D1389",dark:"0D0235"},color_config_array.RED={main:"C20101",light:"EB5353",dark:"9E1818"},color_config_array.ROYAL={main:"01347A",light:"1E58A8",dark:"072650"},color_config_array["RUST-ORANGE"]={main:"8D3908",light:"A14A17",dark:"6A2A04"},color_config_array.SILVER={main:"6F7276",light:"C1C1C1",dark:"494C50"},color_config_array.TEAL={main:"02776A",light:"1AB7A6",dark:"05564D"},color_config_array.VEGAS={main:"8D855F",light:"A9A078",dark:"5A553D"},color_config_array.WHITE={main:"D1D1DC",light:"FCFBEF",dark:"F1EFC9"},color_config_array.YELLOW={main:"F9F880",light:"FAF9A0",dark:"F9F725"}}function SetCloth(){}function ShowLoader(){$("#loader").parent().show(),$("#loader").show()}function HideLoader(){$("#loader").parent().hide(),$("#loader").hide()}function LoadMesh(){if(loadedAgain||mesh_counter++,mesh_counter<mesh_bind.length){var e=mesh_bind[mesh_counter],a=SKIN_URL+"media/colors/"+mesh_config_array[e]+".jpg";if("front_logo"==e||"front_logo_left"==e||"back_logo"==e||"left_mascot"==e||"right_mascot"==e?a=SKIN_URL+"media/logo/"+mesh_config_array[e]+".png":"primary_base"==e||"collar_back"==e?a=SKIN_URL+"media/colors/"+mesh_config_array.primary.toUpperCase()+".jpg":"back_line"==e?"S5"==loaded_style?a=SKIN_URL+"media/colors/"+mesh_config_array.tertiary.toUpperCase()+"_DARK.jpg":"S2"==loaded_style&&(a=SKIN_URL+"media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg"):"tshirt_inner"==e&&(a=SKIN_URL+"media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg"),"front_name"==e){if(loadedAgain)loadedAgain=!1;else{null!=(h=object.getObjectByName(e,!0))&&(CheckHideModel(h),h.children[0].name=h.name,model.add(h));var t=object.getObjectByName("front_name_left",!0);null!=t&&(CheckHideModel(t),t.children[0].name=t.name,model.add(t));var o=object.getObjectByName("front_name_bowtie",!0);null!=o&&(CheckHideModel(o),o.children[0].name=o.name,model.add(o));var n=object.getObjectByName("front_name_lower",!0);null!=n&&(CheckHideModel(n),n.children[0].name=n.name,model.add(n));var r=object.getObjectByName("front_name_upper",!0);null!=r&&(CheckHideModel(r),r.children[0].name=r.name,model.add(r));var l=object.getObjectByName("front_name_left_bowtie",!0);null!=l&&(CheckHideModel(l),l.children[0].name=l.name,model.add(l));var _=object.getObjectByName("front_name_left_lower",!0);null!=_&&(CheckHideModel(_),_.children[0].name=_.name,model.add(_));var i=object.getObjectByName("front_name_left_upper",!0);null!=i&&(CheckHideModel(i),i.children[0].name=i.name,model.add(i));var c=object.getObjectByName("front_name_arch",!0);null!=c&&(CheckHideModel(c),c.children[0].name=c.name,model.add(c));var s=object.getObjectByName("front_name_left_arch",!0);null!=s&&(CheckHideModel(s),s.children[0].name=s.name,model.add(s)),$("#txt_team_name").val("HAWKS"),loadedAgain=!0}if("S2"==loaded_style){E=getTextArea("HAWKS",mesh_config_array.team_name_font,50);(s2_name_image=new Image).addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}),s2_name_image.height=E[1],s2_name_image.style.height=E[1]+"px",s2_name_image.src=SKIN_URL+"media/texture/s2_name_image.png"}else FillTextOnLoad("HAWKS","team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}else if("shoulder_star"==e){null!=(L=object.getObjectByName("shoulder_star",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));M=[{color:color_config_array[mesh_config_array.primary].dark,src:SKIN_URL+"media/texture/plain.png"}];DrawChangeImage(e,M,!0,!1)}else if("chest_ring"==e){null!=(L=object.getObjectByName("chest_ring",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));M=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/plain.png"}];DrawChangeImage(e,M,!0,!1)}else if("neck_pattern"==e){null!=(L=object.getObjectByName("neck_pattern",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));var d=object.getObjectByName("neck_pattern_1",!0);null!=d&&(CheckHideModel(d),d.children[0].name=d.name,model.add(d));var m=object.getObjectByName("neck_pattern_2",!0);null!=m&&(CheckHideModel(m),m.children[0].name=m.name,model.add(m));M=[];"S5"==loaded_style?M=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_3.png"}]:"S2"==loaded_style&&(M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/s2_pattern.png"}]),DrawChangeImage(e,M,!0,!1)}else if("dot_line"==e){var h=object.getObjectByName("dot_line_1",!0);null!=h&&(CheckHideModel(h),h.children[0].name=h.name,model.add(h)),null!=(N=object.getObjectByName("dot_line_2",!0))&&(CheckHideModel(N),N.children[0].name=N.name,model.add(N));var g=object.getObjectByName("dot_line_3",!0);null!=g&&(CheckHideModel(g),g.children[0].name=g.name,model.add(g));var p=object.getObjectByName("dot_line_4",!0);null!=p&&(CheckHideModel(p),p.children[0].name=p.name,model.add(p));var u=object.getObjectByName("dot_line_5",!0);null!=u&&(CheckHideModel(u),u.children[0].name=u.name,model.add(u));M=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/s2_dot_plain.png"},{color:color_config_array[mesh_config_array.tshirt_body].main,src:SKIN_URL+"media/texture/s2_dot.png"}];DrawChangeImage(e,M,!0,!1)}else if("short_pattern"==e){null!=(L=object.getObjectByName("left_pattern",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));var f=object.getObjectByName("right_pattern",!0);null!=f&&(CheckHideModel(f),f.children[0].name=f.name,model.add(f));M=[];"S4"==loaded_style?M=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S7"==loaded_style?M=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S5"==loaded_style?M=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S6"==loaded_style?M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short.png"}]:"S2"==loaded_style&&(M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/s2_short.png"}]),DrawChangeImage(e,M,!0,!1)}else if("secondary_shoulder"==e){null!=(y=object.getObjectByName("shoulder_1",!0))&&(CheckHideModel(y),y.children[0].name=y.name,model.add(y)),null!=(b=object.getObjectByName("shoulder_2",!0))&&(CheckHideModel(b),b.children[0].name=b.name,model.add(b));M=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}];DrawChangeImage(e,M,!0,!1)}else if("secondary_plain"==e)null!=(y=object.getObjectByName("shoulder_1",!0))&&(CheckHideModel(y),y.children[0].name=y.name,model.add(y)),null!=(b=object.getObjectByName("shoulder_2",!0))&&(CheckHideModel(b),b.children[0].name=b.name,model.add(b)),DrawChangeImage("secondary_shoulder",M=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/plain.png"}],!0,!1);else if("shoulder_pattern"==e){null!=(L=object.getObjectByName("shoulder_pattern_1",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L)),null!=(R=object.getObjectByName("shoulder_pattern_2",!0))&&(CheckHideModel(R),R.children[0].name=R.name,model.add(R)),null!=(y=object.getObjectByName("primary_1",!0))&&(CheckHideModel(y),y.children[0].name=y.name,model.add(y)),null!=(b=object.getObjectByName("primary_2",!0))&&(CheckHideModel(b),b.children[0].name=b.name,model.add(b));M=[{color:color_config_array[mesh_config_array.primary].dark,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_pattern_dark.png"},{color:color_config_array[mesh_config_array.primary].light,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_pattern_light.png"}];DrawChangeImage(e,M,!0,!1)}else if("star"==e){null!=(L=object.getObjectByName("back_star",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L)),null!=(R=object.getObjectByName("star",!0))&&(CheckHideModel(R),R.children[0].name=R.name,model.add(R));M=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_star.png"}];DrawChangeImage(e,M,!0,!1)}else if("mascot"==e){null!=(L=object.getObjectByName("front_logo",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L)),null!=(R=object.getObjectByName("back_logo",!0))&&(CheckHideModel(R),R.children[0].name=R.name,model.add(R));var y=object.getObjectByName("left_mascot",!0);null!=y&&(CheckHideModel(y),y.children[0].name=y.name,model.add(y));var b=object.getObjectByName("right_mascot",!0);null!=b&&(CheckHideModel(b),b.children[0].name=b.name,model.add(b));M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/logo/"+mesh_config_array.mascot+"_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/logo/"+mesh_config_array.mascot+"_2.png"}];DrawChangeImage(e,M,!0,!1)}else if("shoulder_plain"==e){null!=(L=object.getObjectByName("shoulder_plain",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));M=[];"S6"==loaded_style?M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_shoulder.png"}]:"S7"==loaded_style?M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/plain.png"}]:"S4"==loaded_style&&(M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/plain.png"}]),DrawChangeImage(e,M,!0,!1)}else if("back_design"==e){null!=(L=object.getObjectByName(e,!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));M=[];"S1"==loaded_style?M=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:SKIN_URL+"media/texture/"+e+"_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/"+e+"_"+loaded_style.toLowerCase()+"_light.png"}]:"S6"==loaded_style&&(M=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_back.png"}]),DrawChangeImage(e,M,!0,!1)}else if("front_number"==e){if(loadedAgain)loadedAgain=!1;else{null!=(L=object.getObjectByName(e,!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));var v=object.getObjectByName("front_number_left",!0);null!=v&&(CheckHideModel(v),v.children[0].name=v.name,model.add(v));var k=object.getObjectByName("back_number",!0);null!=k&&(CheckHideModel(k),k.children[0].name=k.name,model.add(k));var w=object.getObjectByName("back_number_1",!0);null!=w&&(CheckHideModel(w),w.children[0].name=w.name,model.add(w)),$("#txt_number").val("34"),loadedAgain=!0}if("S2"==loaded_style){var E=getTextArea("34",mesh_config_array.number_font,50);(s2_number_image=new Image).addEventListener?s2_number_image.addEventListener("load",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)},!1):s2_number_image.attachEvent&&s2_number_image.attachEvent("onload",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}),s2_number_image.height=E[1],s2_number_image.style.height=E[1]+"px",s2_number_image.src=SKIN_URL+"media/texture/s2_number_image.png"}else FillTextOnLoad("34","number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}else if("back_name"==e){var x=object.getObjectByName(e,!0);null!=x&&(CheckHideModel(x),x.children[0].name=x.name,model.add(x));var I=object.getObjectByName("back_name_bowtie",!0);null!=I&&(CheckHideModel(I),I.children[0].name=I.name,model.add(I));var T=object.getObjectByName("back_name_lower",!0);null!=T&&(CheckHideModel(T),T.children[0].name=T.name,model.add(T));var S=object.getObjectByName("back_name_upper",!0);null!=S&&(CheckHideModel(S),S.children[0].name=S.name,model.add(S));var C=object.getObjectByName("back_name_arch",!0);null!=C&&(CheckHideModel(C),C.children[0].name=C.name,model.add(C)),$("#txt_player_name").val(""),FillTextOnLoad("","player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}else if("secondary_mascot"==e){null!=(L=object.getObjectByName("mascot_1",!0))&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L)),null!=(R=object.getObjectByName("mascot_2",!0))&&(CheckHideModel(R),R.children[0].name=R.name,model.add(R));M=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}];DrawChangeImage(e,M,!0,!1)}else if("primary"==e){var L=object.getObjectByName("primary_1",!0);null!=L&&(CheckHideModel(L),L.children[0].name=L.name,model.add(L));var R=object.getObjectByName("primary_2",!0);null!=R&&(CheckHideModel(R),R.children[0].name=R.name,model.add(R));var M=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/primary_"+loaded_style.toLowerCase()+"_mascot.png"}];DrawChangeImage(e,M,!0,!1)}else{var N=object.getObjectByName(e,!0);null!=N?THREE.ImageUtils.loadTexture(a,void 0,function(a){a.wrapS=a.wrapT=THREE.RepeatWrapping,a.anisotropy=renderer.getMaxAnisotropy(),a.magFilter=THREE.NearestFilter,a.minFilter=THREE.LinearMipMapLinearFilter;var t;t="tshirt_inner"!=e&&"tshirt_body"!=e&&"tshirt_body_neck"!=e&&"short_body"!=e&&"collar_back"!=e&&"collar"!=e&&"back_logo"!=e&&"left_mascot"!=e&&"right_mascot"!=e?getMaterial(e,a,!0):getMaterial(e,a,!1);var o=N.children[0];o.name=N.name,o.scale=N.scale,o.geometry.buffersNeedUpdate=!0,o.geometry.uvsNeedUpdate=!0,o.buffersNeedUpdate=!0,o.uvsNeedUpdate=!0,o.material.needsUpdate=!0,o.material=t,CheckHideModel(N),N.children[0].name=N.name,model.add(N),LoadMesh()}):LoadMesh()}}else mesh_counter==mesh_bind.length&&(changed_team_layout="",changed_player_layout="",scene.add(model),model.scale.set(scaleX,scaleY,scaleZ),model.position.set(1,3.5,1),model.traverse(function(e){"Mesh"==e.type&&(e.castShadow=!1,e.receiveShadow=!1,"left_mascot"!=e.name&&"right_mascot"!=e.name||(e.material.side=THREE.DoubleSide))}),controls.dollyOut(2),controls.update(),render(),setTimeout(function(){HideLoader()},500))}function CheckHideModel(e){"back_number_1"!=e.name&&"back_name_bowtie"!=e.name&&"back_name_lower"!=e.name&&"back_name_upper"!=e.name&&"back_name_arch"!=e.name&&"back_name"!=e.name&&"front_name_left"!=e.name&&"front_name_arch"!=e.name&&"front_name_left_arch"!=e.name&&"front_name_left_bowtie"!=e.name&&"front_name_left_lower"!=e.name&&"front_name_left_upper"!=e.name&&"front_name_bowtie"!=e.name&&"front_name_lower"!=e.name&&"front_name_upper"!=e.name&&"front_logo"!=e.name&&"front_logo_left"!=e.name&&"front_number_left"!=e.name?e.children[0].visible=!0:e.children[0].visible=!1}function modelLoadedCallback(e){camera.zoom=1,camera.updateProjectionMatrix(),controls.update(),object=e.scene;for(var a=0,t=0,o=0,n=0,r=0,l=0,_=0;_<object.children.length;_++){var i=object.children[_],c=new THREE.Vector3;c.setFromMatrixPosition(i.matrixWorld),c.x<a?a=c.x:c.x>t&&(t=c.x),c.y<o?o=c.y:c.y>n&&(n=c.y),c.z<r?r=c.z:c.z>l&&(l=c.z)}var s=(a+t)/2,d=(o+n)/2,m=(r+l)/2,h=Math.max(s-a,t-s);h=Math.max(h,Math.max(d-o,n-d)),h=Math.max(h,Math.max(m-r,l-m)),object.position.set(-s,-d-.05,-m),firstLoad=!0,model=new THREE.Object3D,(bgColor=new Image).addEventListener?bgColor.addEventListener("load",function(){bgPlainColor?LoadMesh():((bgPlainColor=new Image).addEventListener?bgPlainColor.addEventListener("load",function(){LoadMesh()},!1):bgPlainColor.attachEvent&&bgPlainColor.attachEvent("onload",function(){LoadMesh()}),bgPlainColor.src=SKIN_URL+"media/texture/blank.png")},!1):bgColor.attachEvent&&bgColor.attachEvent("onload",function(){bgPlainColor?LoadMesh():((bgPlainColor=new Image).addEventListener?bgPlainColor.addEventListener("load",function(){LoadMesh()},!1):bgPlainColor.attachEvent&&bgPlainColor.attachEvent("onload",function(){LoadMesh()}),bgPlainColor.src=SKIN_URL+"media/texture/blank.png")}),bgColor.src=SKIN_URL+"media/colors/"+mesh_config_array.tshirt_body+".jpg"}function installModel(e,a){console.log("MODEL NAME : "+e),isUploadedMascot=!1,isUploadedFront=!1,isUploadedBack=!1,model&&scene.remove(model),render();var t=new THREE.ColladaLoader;t.options.convertUpAxis=!0,t.load(SKIN_URL+"model/"+e,modelLoadedCallback)}function createWorld(){var e;(e=new THREE.DirectionalLight(16777215)).intensity=.25,e.position.set(4,1.5,4),e.target.position.set(0,0,0),e.updateMatrixWorld(),e.target.updateMatrixWorld(),scene.add(e),(e=new THREE.DirectionalLight(16777215)).intensity=.25,e.position.set(-4,1.5,4),e.target.position.set(0,0,0),e.updateMatrixWorld(),e.target.updateMatrixWorld(),scene.add(e),(e=new THREE.DirectionalLight(16777215)).intensity=.25,e.position.set(-10,1.5,-10),e.target.position.set(0,0,0),e.updateMatrixWorld(),e.target.updateMatrixWorld(),scene.add(e),(e=new THREE.DirectionalLight(16777215)).intensity=.25,e.position.set(10,1.5,-10),e.target.position.set(0,0,0),e.updateMatrixWorld(),e.target.updateMatrixWorld(),scene.add(e),(e=new THREE.HemisphereLight(16777215,10066329,.5)).position.set(0,6,0),scene.add(e),(e=new THREE.AmbientLight(8947848)).intensity=1,scene.add(e)}function SKInitCanvas(){theCanvas=document.getElementById("sk_canvas"),container=document.getElementById("sk_canvas_container"),theCanvas&&theCanvas.getContext?((camera=new THREE.PerspectiveCamera(40,theCanvas.width/theCanvas.height,1,1e4)).lookAt(new THREE.Vector3(0,0,0)),camera.position.z=200,camera.position.x=0,camera.position.y=0,scene=new THREE.Scene,(renderer=new THREE.WebGLRenderer({canvas:theCanvas,alpha:!0,antialias:!0})).setSize(theCanvas.width,theCanvas.height),renderer.shadowMapEnabled=!1,renderer.shadowMapSoft=!1,renderer.setPixelRatio(2*window.devicePixelRatio),renderer.sortObjects=!1,renderer.shadowMapType=THREE.PCFSoftShadowMap,renderer.autoClear=!1,renderer.setClearColor(0),controls=GetControls(camera,renderer.domElement),windowHalfXExtra=(window.innerWidth-$("#sk_main_row").width())/2,window.addEventListener("resize",onWindowResize,!1),createWorld(),installModel(loaded_style.toUpperCase()+".js","#D1D1DC"),rotationCount=0,render()):document.getElementById("message").innerHTML="Sorry, your browser doesn't support canvas graphics."}function GetControls(e,a){var t=new THREE.OrbitControls(e,a);return t.enabled=!0,t.enableZoom=!0,t.enableRotate=!0,t.enablePan=!0,t.enableDamping=!0,t.dampingFactor=.1,t.minDistance=100,t.maxDistance=200,t.peekDistance=.3,t.minPolarAngle=Math.PI/2,t.maxPolarAngle=Math.PI/2,t}function onWindowResize(){SCREEN_WIDTH=window.innerWidth,loaded_screen_width!=SCREEN_WIDTH&&(SetHeight(),camera.aspect=canvas_width/canvas_height,camera.lookAt(new THREE.Vector3(0,0,0)),camera.updateProjectionMatrix(),renderer.setSize(canvas_width,canvas_height),controls.update(),renderer.render(scene,camera))}function animate(){requestAnimationFrame(animate),render()}function render(){model&&(model.scale.set(scaleX,scaleY,scaleZ),renderer.render(scene,camera))}function SelectColor(e){$(".div_sk_select_color_label .sk_chk_elem").remove();var a=$(e).attr("style").replace("background:",""),t=$(e).attr("data-val");$(spn_elem).attr("style","background:"+a),$(spn_elem).attr("data-val",t),$(e).prepend(chk_elem);a.replace(":","").replace(";","").replace("#","");if("body_color"==change_color_elem){ShowLoader(),mesh_config_array.body_color=a.replace(":","").replace(";","").replace("#",""),mesh_config_array.tshirt_body=t,mesh_config_array.tshirt_body_neck=t,mesh_config_array.short_body=t,ChangeMeshColor(t,"tshirt_body"),ChangeMeshColor(t+"_LIGHT","tshirt_inner"),ChangeMeshColor(t,"tshirt_body_neck"),ChangeMeshColor(t,"short_body");o=[];(bgColor=new Image).addEventListener?bgColor.addEventListener("load",function(){"S1"==loaded_style?DrawChangeImage("back_design",o=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:SKIN_URL+"media/texture/back_design_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/back_design_"+loaded_style.toLowerCase()+"_light.png"}],!0,!1):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern","front_logo","back_logo","front_name","back_name","number"],CallDrawImage()):"S6"==loaded_style?DrawChangeImage("back_design",o=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_back.png"}],!0,!1):"S2"==loaded_style?(ChangeMeshColor(t,"back_line"),changeMeshArray=["dot_line"],CallDrawImage()):(HideLoader(),render())},!1):bgColor.attachEvent&&bgColor.attachEvent("onload",function(){"S1"==loaded_style?DrawChangeImage("back_design",o=[{color:color_config_array[mesh_config_array.tshirt_body].dark,src:SKIN_URL+"media/texture/back_design_"+loaded_style.toLowerCase()+"_dark.png"},{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/back_design_"+loaded_style.toLowerCase()+"_light.png"}],!0,!1):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern","front_logo","back_logo","front_name","back_name","number"],CallDrawImage()):"S6"==loaded_style?DrawChangeImage("back_design",o=[{color:color_config_array[mesh_config_array.tshirt_body].light,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_back.png"}],!0,!1):"S2"==loaded_style?(ChangeMeshColor(t,"back_line"),changeMeshArray=["dot_line"],CallDrawImage()):(HideLoader(),render())}),bgColor.src=SKIN_URL+"media/colors/"+mesh_config_array.tshirt_body+".jpg"}else if("collar_color"==change_color_elem)mesh_config_array.collar=t,ChangeMeshColor(t,"collar"),HideLoader(),render();else if("primary"==change_color_elem){var o=[];mesh_config_array.primary=t,ShowLoader(),loadedAgain=!0;"S1"==loaded_style?((changeMeshArray=[]).push("primary"),isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(t,"primary_base")):"S3"==loaded_style?(changeMeshArray=["shoulder_star","shoulder_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S5"==loaded_style?(changeMeshArray=["neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S7"==loaded_style?(changeMeshArray=["short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(t,"collar_back")):"S4"==loaded_style?(changeMeshArray=["shoulder_plain","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S6"==loaded_style?(changeMeshArray=["shoulder_plain","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S2"==loaded_style&&(changeMeshArray=["neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")),CallDrawImage()}else if("secondary"==change_color_elem){mesh_config_array.secondary=t,ShowLoader(),loadedAgain=!0;"S1"==loaded_style?(changeMeshArray=["secondary_shoulder","secondary_mascot"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot"),ChangeMeshColor(t,"primary_base")):"S3"==loaded_style?(changeMeshArray=["secondary_plain"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S4"==loaded_style?(changeMeshArray=["chest_ring","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S5"==loaded_style?(changeMeshArray=["back_line","neck_pattern","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S7"==loaded_style?(changeMeshArray=["secondary_shoulder","short_pattern"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")):"S6"==loaded_style&&(changeMeshArray=["dot_line"],isUploadedFront||changeMeshArray.push("front_logo"),isUploadedBack||changeMeshArray.push("back_logo"),isUploadedMascot||changeMeshArray.push("shorts_mascot")),CallDrawImage()}else"tertiary"==change_color_elem?(mesh_config_array.tertiary=t,ShowLoader(),"S3"==loaded_style?changeMeshArray=["star"]:"S5"==loaded_style?(ChangeMeshColor(t,"back_line"),changeMeshArray=["neck_pattern","short_pattern"]):"S7"==loaded_style?changeMeshArray=["shoulder_pattern","short_pattern"]:"S4"==loaded_style&&(changeMeshArray=["short_pattern"]),CallDrawImage()):"team_name_border"==change_color_elem?(mesh_config_array.team_name_border=a.replace(":","").replace(";","").replace("#",""),FillTeamName()):"team_name_color"==change_color_elem?(mesh_config_array.team_name_color=a.replace(":","").replace(";","").replace("#",""),FillTeamName()):"player_name_color"==change_color_elem?(mesh_config_array.player_name_color=a.replace(":","").replace(";","").replace("#",""),FillPlayerName()):"player_name_border"==change_color_elem?(mesh_config_array.player_name_border=a.replace(":","").replace(";","").replace("#",""),FillPlayerName()):"number_color"==change_color_elem?(mesh_config_array.number_color=a.replace(":","").replace(";","").replace("#",""),FillNumber()):"number_border"==change_color_elem&&(mesh_config_array.number_border=a.replace(":","").replace(";","").replace("#",""),FillNumber());ShowHide(!1)}function FillTeamName(){if(loadedAgain=!0,"S2"==loaded_style){var e=mesh_config_array.team_name_layout,a=getTextArea($("#txt_team_name").val(),mesh_config_array.team_name_font,50);(s2_name_image=new Image).addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.team_name_color),FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)});var t=a[1];"rebookends"==e||"bookends"==e?t*=1.3:"slanted"==e?t*=1.3:"arch_upper"==e?t*=.5:"arch_lower"==e?t*=1.8:"arch"==e&&(t*=.55),s2_name_image.height=t,s2_name_image.style.height=t+"px",s2_name_image.src=SKIN_URL+"media/texture/s2_name_image.png"}else FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold)}function FillPlayerName(){if(loadedAgain=!0,"S2"==loaded_style){var e=mesh_config_array.player_name_layout,a=getTextArea($("#txt_player_name").val(),mesh_config_array.player_name_font,50);(s2_name_image=new Image).addEventListener?s2_name_image.addEventListener("load",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.player_name_color),FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)},!1):s2_name_image.attachEvent&&s2_name_image.attachEvent("onload",function(){colorImage(s2_name_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.player_name_color),FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)});var t=a[1];"rebookends"==e||"bookends"==e?t*=1.3:"slanted"==e?t*=1.3:"arch_upper"==e?t*=.5:"arch_lower"==e?t*=1.8:"arch"==e&&(t*=.55),s2_name_image.height=t,s2_name_image.style.height=t+"px",s2_name_image.src=SKIN_URL+"media/texture/s2_name_image.png"}else FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}function FillNumber(){if(loadedAgain=!0,"S2"==loaded_style){var e=getTextArea($("#txt_number").val(),mesh_config_array.number_font,50);(s2_number_image=new Image).addEventListener?s2_number_image.addEventListener("load",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)},!1):s2_number_image.attachEvent&&s2_number_image.attachEvent("onload",function(){colorImage(s2_number_image,"sk_canvas_imgs2","sk_canvas_s2","#"+mesh_config_array.number_color),FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}),s2_number_image.height=e[1],s2_number_image.style.height=e[1]+"px",s2_number_image.src=SKIN_URL+"media/texture/s2_number_image.png"}else FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold)}function ChangeMeshColor(e,a){ShowLoader(),e=e.replace(" ","-"),mesh_config_array[a]=e;var t=SKIN_URL+"media/colors/"+mesh_config_array[a]+".jpg";"front_logo"==a||"front_logo_left"==a||"back_logo"==a||"left_mascot"==a||"right_mascot"==a?t=SKIN_URL+"media/logo/"+mesh_config_array[a]+".png":"primary_base"==a?t=SKIN_URL+"media/colors/"+mesh_config_array.primary.toUpperCase()+".jpg":"back_line"==a&&("S5"==loaded_style?t=SKIN_URL+"media/colors/"+mesh_config_array.tertiary.toUpperCase()+"_DARK.jpg":"S2"==loaded_style&&(t=SKIN_URL+"media/colors/"+mesh_config_array.tshirt_body.toUpperCase()+"_LIGHT.jpg")),THREE.ImageUtils.loadTexture(t,void 0,function(e){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.anisotropy=renderer.getMaxAnisotropy(),e.magFilter=THREE.NearestFilter,e.minFilter=THREE.LinearMipMapLinearFilter,e.needsUpdate=!0;var t=model.getObjectByName(a,!0);if(null!=t){var o;o="tshirt_inner"!=a&&"tshirt_body"!=a&&"tshirt_body_neck"!=a&&"short_body"!=a&&"collar_back"!=a&&"collar"!=a&&"back_logo"!=a&&"left_mascot"!=a&&"right_mascot"!=a?getMaterial(a,e,!0):getMaterial(a,e,!1);var n=t.children[0];n.children.length>0&&(children=children.children[0]),n.geometry.buffersNeedUpdate=!0,n.geometry.uvsNeedUpdate=!0,n.material.needsUpdate=!0,n.material=o}0==changeMeshArray.length&&HideLoader()})}function SetSelectedColor(){if($(".div_sk_select_color_label .sk_chk_elem").remove(),$(spn_elem).attr("style")){$(spn_elem).attr("style").replace("background:","");var e=$(spn_elem).attr("data-val");""!=e&&$(".div_sk_select_color_label[data-val='"+e+"']").prepend(chk_elem)}}function SetSelectedLogo(){if($(".a_sk_select_logo_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var e=$(spn_elem).attr("data-val");""!=e&&$(".a_sk_select_logo_label[data-val='"+e+"']").addClass("sk_fl_active")}}function SelectFont(e){loadedAgain=!0,$(".a_sk_select_font_label").removeClass("sk_fl_active");var a=$(e).attr("data-val");$(spn_elem).attr("data-val",a),$(e).addClass("sk_fl_active"),$("#sk_canvas_text").css({"font-family":a});var t=document.getElementById("sk_canvas_text"),o=t.getContext("2d");imageSmoothingEnabled(o,!0),o.clearRect(0,0,t.width,t.height),o.font="50px   "+a,"team_name"==change_font_elem?(mesh_config_array.team_name_font=a,team_name_font=a,isFilling=!0,ShowLoader(),loadedAgain=!0,setTimeout(function(){FillTeamName()},100)):"number"==change_font_elem?(isFilling=!0,mesh_config_array.number_font=a,number_font=a,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillNumber()},100)):"player_name"==change_font_elem&&(isFilling=!0,mesh_config_array.player_name_font=a,player_name_font=a,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillPlayerName()},100)),ShowHide(!1)}function SetSelectedFont(){if($(".a_sk_select_font_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var e=$(spn_elem).attr("data-val");""!=e&&$(".a_sk_select_font_label[data-val='"+e+"']").addClass("sk_fl_active")}}function SelectLogo(e){$(".a_sk_select_logo_label").removeClass("sk_fl_active");var a=$(e).attr("data-val");$(spn_elem).attr("data-val",a);var t=$(e).find(".img_sk_select_logo").attr("src");$(img_elem).attr("src",t),$(e).addClass("sk_fl_active"),"front_logo"==change_logo_elem?(frontLogoPrice=0,isUploadedFront=!1,mesh_config_array.front_logo="mascots_"+a):"back_logo"==change_logo_elem?(backLogoPrice=0,isUploadedBack=!1,mesh_config_array.back_logo="mascots_"+a):"shorts_mascot"==change_logo_elem&&(mascotPrice=0,isUploadedMascot=!1,mesh_config_array.mascot="mascots_"+a),SetPrice();var o=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/logo/mascots_"+a+"_1.png"}];"4"!=a&&"7"!=a&&"18"!=a&&"20"!=a&&"29"!=a&&"34"!=a&&"36"!=a&&o.push({color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/logo/mascots_"+a+"_2.png"}),ShowLoader(),DrawChangeImage(change_logo_elem,o,!1,!0),ShowHide(!1)}function SelectLayout(e){$(".a_sk_select_layout_label").removeClass("sk_fl_active");var a=$(e).attr("data-val");$(spn_elem).attr("data-val",a),$(e).addClass("sk_fl_active"),"team_name"==change_layout_elem?(changed_team_layout="","bowtie"!=a&&"arch_lower"!=a&&"arch_upper"!=a&&"arch"!=a||(changed_team_layout=a),mesh_config_array.team_name_layout=a,isFilling=!0,ShowLoader(),loadedAgain=!0,setTimeout(function(){FillTeamName(),ShowHideLayoutMesh(change_layout_elem,a)},100)):"player_name"==change_layout_elem&&(changed_player_layout="","bowtie"!=a&&"arch_lower"!=a&&"arch_upper"!=a&&"arch"!=a||(changed_player_layout=a),mesh_config_array.player_name_layout=a,isFilling=!0,ShowLoader(),setTimeout(function(){loadedAgain=!0,FillPlayerName(),ShowHideLayoutMesh(change_layout_elem,a)},100)),ShowHide(!1)}function SetSelectedLayout(){if($(".a_sk_select_layout_label").removeClass("sk_fl_active"),$(spn_elem).attr("data-val")){var e=$(spn_elem).attr("data-val");""!=e&&$(".a_sk_select_layout_label[data-val='"+e+"']").addClass("sk_fl_active")}}function imageSmoothingEnabled(e,a){a=!1,e.mozImageSmoothingEnabled=a,e.oImageSmoothingEnabled=a,e.webkitImageSmoothingEnabled=a,e.imageSmoothingEnabled=a}function FillTextOnLoad(e,a,t,o,n,r,l){DrawText(e,a,t,o,n,r,l);var _=document.getElementById("sk_canvas_text"),i=$("#sk_canvas_text").width(),c=$("#sk_canvas_text").height();!1!==THREE.Math.isPowerOfTwo(i)&&!1!==THREE.Math.isPowerOfTwo(c)||(i=nearest_pow2(i),c=nearest_pow2(c)),_.style.width=i+"px",_.style.height=c+"px",THREE.ImageUtils.loadTexture(_.toDataURL("image/png"),void 0,function(e){"team_name"==a?(ChangeMaterialFromCanvasLoad("front_name",_,!1,e),ChangeMaterialFromCanvasLoad("front_name_arch",_,!1,e),ChangeMaterialFromCanvasLoad("front_name_bowtie",_,!1,e),ChangeMaterialFromCanvasLoad("front_name_lower",_,!1,e),ChangeMaterialFromCanvasLoad("front_name_upper",_,!1,e),ChangeMaterialFromCanvasLoad("front_name_left",_,!0,e),ChangeMaterialFromCanvasLoad("front_name_left_arch",_,!0,e),ChangeMaterialFromCanvasLoad("front_name_left_bowtie",_,!0,e),ChangeMaterialFromCanvasLoad("front_name_left_lower",_,!0,e),ChangeMaterialFromCanvasLoad("front_name_left_upper",_,!0,e)):"number"==a?(ChangeMaterialFromCanvasLoad("front_number",_,!1,e),ChangeMaterialFromCanvasLoad("front_number_left",_,!1,e),ChangeMaterialFromCanvasLoad("back_number",_,!1,e),ChangeMaterialFromCanvasLoad("back_number_1",_,!0,e)):"player_name"==a&&(ChangeMaterialFromCanvasLoad("back_name",_,!1,e),ChangeMaterialFromCanvasLoad("back_name_bowtie",_,!1,e),ChangeMaterialFromCanvasLoad("back_name_lower",_,!1,e),ChangeMaterialFromCanvasLoad("back_name_upper",_,!1,e),ChangeMaterialFromCanvasLoad("back_name_arch",_,!0,e))})}function ChangeMaterialFromCanvasLoad(e,a,t,o){var n=model.getObjectByName(e,!0);if(null!=n){o.wrapS=o.wrapT=THREE.RepeatWrapping,o.anisotropy=renderer.getMaxAnisotropy(),o.magFilter=THREE.NearestFilter,o.minFilter=THREE.LinearMipMapLinearFilter;var r;if(r="tshirt_inner"!=e&&"tshirt_body"!=e&&"tshirt_body_neck"!=e&&"short_body"!=e&&"collar_back"!=e&&"collar"!=e&&"back_logo"!=e&&"left_mascot"!=e&&"right_mascot"!=e?getMaterial(e,o,!0):getMaterial(e,o,!1),0==n.children.length)(l=n).geometry.buffersNeedUpdate=!0,l.geometry.uvsNeedUpdate=!0,l.buffersNeedUpdate=!0,l.uvsNeedUpdate=!0,l.material.needsUpdate=!0,l.material=r;else{var l=n.children[0];l.name=n.name,l.scale=n.scale,l.geometry.buffersNeedUpdate=!0,l.geometry.uvsNeedUpdate=!0,l.buffersNeedUpdate=!0,l.uvsNeedUpdate=!0,l.material.needsUpdate=!0,l.material=r}t&&LoadMesh()}else t&&LoadMesh()}function setFontToHtml(){for(var e=$(".btn_sk_font_label"),a=0;a<e.length;a++)if("team_name"==$(e[a]).attr("data-val"))(t=$(e[a]).find(".btn-label"))&&$(t).attr("data-val",mesh_config_array.team_name_font);else if("player_name"==$(e[a]).attr("data-val"))(t=$(e[a]).find(".btn-label"))&&$(t).attr("data-val",mesh_config_array.player_name_font);else if("number"==$(e[a]).attr("data-val")){var t=$(e[a]).find(".btn-label");t&&$(t).attr("data-val",mesh_config_array.number_font)}}function getFontFromHtml(e){for(var a="",t=$(".btn_sk_font_label"),o=0;o<t.length;o++)if($(t[o]).attr("data-val")==e){var n=$(t[o]).find(".btn-label");n&&$(n).attr("data-val")&&""!=$(n).attr("data-val")&&(a=$(n).attr("data-val"),"team_name"==e?(team_name_font=a,mesh_config_array.team_name_font=a):"player_name"==e?(player_name_font=a,mesh_config_array.player_name_font=a):"number"==e&&(number_font=a,mesh_config_array.number_font=a))}return a}function DrawText(e,a,t,o,n,r,l){"team_name"!=a&&"player_name"!=a||"arch"!=r&&"bowtie"!=r&&"arch_lower"!=r&&"arch_upper"!=r||(r="straight"),void 0==t&&(t=getFontFromHtml(a));var _=50;l="normal";var c=0;"italic"==r?l="italic":"rebookends"!=r&&"bookends"!=r||(e=e.toUpperCase()),isFilling&&ShowLoader(),console.log("part : "+a+" - font : "+t),o=o.replace(":","").replace(";","").replace("#",""),n=n.replace(":","").replace(";","").replace("#",""),$("#sk_canvas_text").css({"font-family":t,"font-size":_+"px"}),styleSet&&($("#sk_canvas_text").width(CANVAS_WIDTH_TEXT),$("#sk_canvas_text").height(CANVAS_HEIGHT_TEXT)),$("#sk_canvas_text").attr({height:CANVAS_HEIGHT_TEXT,width:CANVAS_WIDTH_TEXT});var s=document.getElementById("sk_canvas_text");if(e.length>0){var d=getTextArea(e,t,_),m=d[0],h=d[1];h<m/4&&(h=m/4);var g=m/e.length,p=0;(m+=g)<h&&(p=(2*h-m)/2,m=2*h);var u=m,f=h,y="middle",b=charWidth=small_font=0;if("bowtie"==r||"arch_lower"==r||"arch_upper"==r){if("bowtie"==r?c=_/(1.5*e.length):"arch_lower"!=r&&"arch_upper"!=r||(y="arch_lower"==r?"top":"bottom",c=_/(2*e.length)),e.length>2){var v=d;small_font=_;var k;for(k=0;k<e.length/2;k++)small_font-=c;var w=getTextArea(e,t,small_font);b=v[0]-w[0],charWidth=b/e.length/4,"express"!=t&&(m-=b/4)}}else"rebookends"==r||"bookends"==r?h*=1.1:"slanted"==r||"arch_lower"==r||"arch_upper"==r?(h*=1.3,m*=1.1):"arch"==r&&(y="bottom",h*=1.3);styleSet&&(s.setAttribute("width",m),s.setAttribute("height",h),s.width=m,s.height=h,s.style.width=m+"px",s.style.height=h+"px");var E=m/2,x=h/2,I=s.getContext("2d");if(imageSmoothingEnabled(I,!0),I.clearRect(0,0,s.width,s.height),I.font=l+" "+_+"px "+t,I.translate(.5,.5),I.font=l+" "+_+"px "+t,I.font=l+" "+_+"px "+t,I.miterLimit=2,I.text5Baseline=y,I.textAlign="center","scriptjet"==t?(x-=_/24,_*=.8):"blast"==t?(E-=u/9,_*=.85):"arizona"==t?(E-=u/12,_*=.9):"speed"==t?(E-=u/12,_*=.85):"express"==t&&(E-=u/12),"number"!=a&&"straight"!=r&&"italic"!=r&&"slanted"!=r||(E=s.width/2),"scriptjet"==t&&("slanted"==r&&"team_name"==a||"bookends"==r)&&("bookends"==r?E-=u/1:"slanted"==r&&(E+=u/14)),I.font=l+" "+_+"px "+t,I.font=l+" "+_+"px "+t,E=parseInt(E.toString().split(".")[0])+.5,"number"==a||"straight"==r||"italic"==r)I.translate(.5,.5);else if("slanted"==r){L=-g/2;L=parseInt(L.toString().split(".")[0])+.5;C=f/2.8;C=parseInt(C.toString().split(".")[0])+.5,I.translate(L,C)}else if("arch"==r)if("scriptjet"==t){L=g+p;L=parseInt(L.toString().split(".")[0])+.5;C=.8*f;C=parseInt(C.toString().split(".")[0])+.5,I.translate(L,C)}else{L=g+p;L=parseInt(L.toString().split(".")[0])+.5;C=f/2;C=parseInt(C.toString().split(".")[0])+.5,I.translate(L,C)}else{var T="scriptjet"==t?f/2.5:f/3,S=T;if(S=parseInt(S.toString().split(".")[0])+.5,"arch_lower"==r){L=g+p;L=parseInt(L.toString().split(".")[0])+.5,I.translate(L,-S)}else if("arch_upper"==r){L=g+p;L=parseInt(L.toString().split(".")[0])+.5;C=T="scriptjet"==t?f/1.5:f/3;C=parseInt(C.toString().split(".")[0])+.5,I.translate(L,C)}else if("rebookends"==r){L=g+p;L=parseInt(L.toString().split(".")[0])+.5,I.translate(L,.5)}else if("bookends"==r){L=g+p;L="scriptjet"==t?L+.6*L:L,L=parseInt(L.toString().split(".")[0])+.5;var C=T=f/6;C=parseInt(C.toString().split(".")[0])+.5,I.translate(L,-C)}else{var L=g+p;L=parseInt(L.toString().split(".")[0])+.5,I.translate(L,.5)}}I.lineWidth=_/13,I.strokeStyle="#"+n,I.fillStyle="#"+o,console.log(E),I.miterLimit=2,I.textBaseline=y,I.textAlign="center";var R=charWidth2=charWidth3=0;pattern=I.createPattern(bgPlainColor,"repeat"),I.fillStyle=pattern,I.fillRect(0,0,m,h),I.strokeStyle="#"+n;var M,N="#"+o;if("S2"==loaded_style){var B=document.getElementById("sk_canvas_s2");M=I.createPattern(B,"repeat-x"),N="#"+color_config_array[mesh_config_array.tshirt_body].main}else I.fillStyle="#"+o;if("number"==a)I.fillStyle=N,I.strokeText(e,E,x),I.fillText(e,E,x),I.fillStyle=M,I.fillText(e,E,x);else if("bowtie"==r||"arch_lower"==r||"arch_upper"==r){document.getElementById("div_sk_text_1").innerHTML="",E=0;var H=_;for(I.miterLimit=2,I.textBaseline=y,I.textAlign="center",i=0;i<e.length;i++)if(console.log(E),R=getTextArea(e[i],t,_)[0],e.length>2&&""!=e[i]&&(e.length%2==0?i<e.length/2?H-=c:i>e.length/2&&(H+=c,!0):i<e.length/2?H-=c:(H+=c,!0)),I.font=H+"px "+t,I.fillStyle=N,I.strokeText(e[i],E,x),I.fillText(e[i],E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e[i],E,x)),e.length>2){R=getTextArea(e[i],t,_)[0],charWidth2=getTextArea(e[i],t,small_font)[0],charWidth3=getTextArea(e[i],t,H)[0];var U=(R+charWidth2+charWidth3)/3;R=getTextArea(e[i+1],t,_)[0],charWidth2=getTextArea(e[i+1],t,small_font)[0],charWidth3=getTextArea(e[i+1],t,H)[0];P=(R+charWidth2+charWidth3)/3;E+=charWidth+(U+P)/2}else E+=R=getTextArea(e[i],t,_)[0]}else if("rebookends"==r||"bookends"==r){I.miterLimit=2,I.textBaseline=y,I.textAlign="center",document.getElementById("div_sk_text_1").innerHTML="",E=0;j=f/(3*e.length);I.miterLimit=2,I.textBaseline=y,I.textAlign="center",!0;var A=0;for("bookends"==r?(A=.05*f,A+=A*(e.length/50)):A=.15*f,x+=A,i=0;i<e.length;i++)console.log(E),e.length>2?(0!=i&&i<e.length-1&&(I.font=_+"px "+t,I.fillStyle=N,I.strokeText(e[i],E,x),I.fillText(e[i],E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e[i],E,x))),R=getTextArea(e[i],t,_)[0],charWidth2=getTextArea(e[i+1],t,_)[0],E+=(R+charWidth2)/2):(!1,I.font=_+"px "+t,I.fillStyle=N,I.strokeText(e[i],E,x),I.fillText(e[i],E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e[i],E,x)),R=getTextArea(e[i],t,_)[0],charWidth2=getTextArea(e[i+1],t,_)[0],E+=(R+charWidth2)/2);for(x-=A,I.scale(1,1.22),E=0,i=0;i<e.length;i++)console.log(E),0!=i&&i!=e.length-1||(I.font=_+"px "+t,I.fillStyle=N,I.strokeText(e[i],E,x),I.fillText(e[i],E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e[i],E,x))),R=getTextArea(e[i],t,_)[0],charWidth2=getTextArea(e[i+1],t,_)[0],E+=(R+charWidth2)/2}else if("arch"==r){I.miterLimit=2,I.textBaseline=y,I.textAlign="center",document.getElementById("div_sk_text_1").innerHTML="",E=0;var j=f/(3.5*e.length);for(I.miterLimit=2,I.textBaseline=y,I.textAlign="center",i=0;i<e.length;i++){console.log(E),e.length>2&&""!=e[i]&&(e.length%2==0?i<e.length/2?x-=j:i>e.length/2&&(x+=j):i<e.length/2?x-=j:x+=j),I.font=_+"px "+t,I.fillStyle=N,I.strokeText(e[i],E,x),I.fillText(e[i],E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e[i],E,x)),R=getTextArea(e[i],t,_)[0],charWidth2=getTextArea(e[i+1],t,_)[0];var P=(R+charWidth2+charWidth3)/3;E+=(R+charWidth2)/2}}else"slanted"==r?(I.miterLimit=2,I.textBaseline=y,I.textAlign="center",I.rotate(-8*Math.PI/180),I.fillStyle=N,I.strokeText(e,E,x),I.fillText(e,E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e,E,x))):(I.miterLimit=2,I.textBaseline=y,I.textAlign="center",I.fillStyle=N,I.strokeText(e,E,x),I.fillText(e,E,x),"S2"==loaded_style&&(I.fillStyle=M,I.fillText(e,E,x)))}}function FillTextName(e,a,t,o,n,r,l){if(DrawText(e,a,t,o,n,r,l),loadedAgain)console.log("loading again"),loadedAgain=!1,loadedOnceAgain=!0,setTimeout(function(){FillTextName(e,a,t,o,n,r,l)},100);else if(loadedOnceAgain)console.log("loading once again "+a+" with font "),loadedOnceAgain=!1,setTimeout(function(){FillTextName(e,a,t,o,n,r,l)},100);else{var _=document.getElementById("sk_canvas_text"),i=$("#sk_canvas_text").width(),c=$("#sk_canvas_text").height();!1!==THREE.Math.isPowerOfTwo(i)&&!1!==THREE.Math.isPowerOfTwo(c)||(i=nearest_pow2(i),c=nearest_pow2(c)),styleSet&&(_.style.width=i+"px",_.style.height=c+"px"),console.log("loaded "+a+" with font "+context.font);var s=new THREE.Texture;s.image=_,s.needsUpdate=!0,s.anisotropy=16,"team_name"==a?(ChangeMaterialFromCanvas("front_name",_,s),ChangeMaterialFromCanvas("front_name_bowtie",_,s),ChangeMaterialFromCanvas("front_name_lower",_,s),ChangeMaterialFromCanvas("front_name_upper",_,s),ChangeMaterialFromCanvas("front_name_left_bowtie",_,s),ChangeMaterialFromCanvas("front_name_left_lower",_,s),ChangeMaterialFromCanvas("front_name_left_upper",_,s),ChangeMaterialFromCanvas("front_name_arch",_,s),ChangeMaterialFromCanvas("front_name_left_arch",_,s),isFilling=!1,ChangeMaterialFromCanvas("front_name_left",_,s)):"number"==a?(ChangeMaterialFromCanvas("front_number",_,s),ChangeMaterialFromCanvas("front_number_left",_,s),ChangeMaterialFromCanvas("back_number_1",_,s),isFilling=!1,ChangeMaterialFromCanvas("back_number",_,s)):"player_name"==a&&(ChangeMaterialFromCanvas("back_name_bowtie",_,s),ChangeMaterialFromCanvas("back_name_lower",_,s),ChangeMaterialFromCanvas("back_name_upper",_,s),ChangeMaterialFromCanvas("back_name_arch",_,s),isFilling=!1,ChangeMaterialFromCanvas("back_name",_,s)),HideLoader(),render()}}function ShowHideLayoutMesh(e,a){if("team_name"==e){var t=model.getObjectByName("front_name",!0),o=model.getObjectByName("front_name_left",!0),n=model.getObjectByName("front_name_bowtie",!0),r=model.getObjectByName("front_name_lower",!0),l=model.getObjectByName("front_name_upper",!0),_=model.getObjectByName("front_name_left_bowtie",!0),i=model.getObjectByName("front_name_left_lower",!0),c=model.getObjectByName("front_name_left_upper",!0),s=model.getObjectByName("front_name_arch",!0),d=model.getObjectByName("front_name_left_arch",!0);if(null!=t&&((L=t.children[0]).visible=!1),null!=o&&((v=o.children[0]).visible=!1),null!=n&&((m=n.children[0]).visible=!1),null!=r&&((h=r.children[0]).visible=!1),null!=l&&((g=l.children[0]).visible=!1),null!=_&&((u=_.children[0]).visible=!1),null!=i&&((f=i.children[0]).visible=!1),null!=c&&((y=c.children[0]).visible=!1),null!=s&&((p=s.children[0]).visible=!1),null!=d&&((b=d.children[0]).visible=!1),"full_front"==tname_type)if("bowtie"==changed_team_layout){if(null!=n){var m=n.children[0];m.visible=!0}}else if("arch_lower"==changed_team_layout){if(null!=r){var h=r.children[0];h.visible=!0}}else if("arch_upper"==changed_team_layout){if(null!=l){var g=l.children[0];g.visible=!0}}else if("arch"==changed_team_layout){if(null!=s){var p=s.children[0];p.visible=!0}}else null!=t&&((L=t.children[0]).visible=!0);else if("left_chest"==tname_type)if("bowtie"==changed_team_layout){if(null!=_){var u=_.children[0];u.visible=!0}}else if("arch_lower"==changed_team_layout){if(null!=i){var f=i.children[0];f.visible=!0}}else if("arch_upper"==changed_team_layout){if(null!=c){var y=c.children[0];y.visible=!0}}else if("arch"==changed_team_layout){if(null!=d){var b=d.children[0];b.visible=!0}}else if(null!=o){var v=o.children[0];v.visible=!0}}else if("player_name"==e){var t=model.getObjectByName("back_name",!0),k=model.getObjectByName("back_name_bowtie",!0),w=model.getObjectByName("back_name_lower",!0),E=model.getObjectByName("back_name_upper",!0),x=model.getObjectByName("back_name_arch",!0);if(null!=t&&((L=t.children[0]).visible=!1),null!=k&&((I=k.children[0]).visible=!1),null!=w&&((T=w.children[0]).visible=!1),null!=E&&((S=E.children[0]).visible=!1),null!=x&&((C=x.children[0]).visible=!1),"upper_back"==pname_type)if("bowtie"==changed_player_layout){if(null!=k){var I=k.children[0];I.visible=!0}}else if("arch_lower"==changed_player_layout){if(null!=w){var T=w.children[0];T.visible=!0}}else if("arch_upper"==changed_player_layout){if(null!=E){var S=E.children[0];S.visible=!0}}else if("arch"==changed_player_layout){if(null!=x){var C=x.children[0];C.visible=!0}}else if(null!=t){var L=t.children[0];L.visible=!0}}}function addGetTextArea(e,a,t){var o=document.getElementById("div_sk_text_1"),n=document.createElement("span");n.innerHTML=e,n.style.fontFamily=a,n.style.fontSize=t+"px",o.appendChild(n);var r=o.offsetHeight;return[o.offsetWidth,r]}function getTextArea(e,a,t){" "==e&&(e="&nbsp;");var o=document.getElementById("div_sk_text");o.innerHTML=e,o.style.fontFamily=a,o.style.fontSize=t+"px";var n=o.offsetHeight;return[o.offsetWidth,n]}function ChangeMaterialFromCanvas(e,a,t){var o=model.getObjectByName(e,!0);if(null!=o){t.wrapS=t.wrapT=THREE.RepeatWrapping,t.anisotropy=renderer.getMaxAnisotropy(),t.magFilter=THREE.NearestFilter,t.minFilter=THREE.LinearMipMapLinearFilter;var n;n="tshirt_inner"!=e&&"tshirt_body"!=e&&"tshirt_body_neck"!=e&&"short_body"!=e&&"collar"!=e&&"collar_back"!=e&&"back_logo"!=e&&"left_mascot"!=e&&"right_mascot"!=e?getMaterial(e,t,!0):getMaterial(e,t,!1);var r=o.children[0];r.name=o.name,r.scale=o.scale,r.geometry.buffersNeedUpdate=!0,r.geometry.uvsNeedUpdate=!0,r.buffersNeedUpdate=!0,r.uvsNeedUpdate=!0,r.material.needsUpdate=!0,r.material=n}calledDrawImage&&(calledDrawImage=!1,render(),HideLoader())}function hexToRgb(e){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(a,function(e,a,t,o){return a+a+t+t+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}function DrawChangeImage(e,a,t,o){var n="sk_canvas_text1",r="sk_canvas_text2",l="sk_canvas_text3";"shoulder"==e&&(n="sk_canvas_text3"),loadedImage1=!1,loadedImage2=!1,loadedImage3=!1,loadedImage4=!1;var _=new Image;_.addEventListener?_.addEventListener("load",function(){if(!loadedImage1)if(loadedImage1=!0,colorImage(_,"sk_canvas_img1",n,"#"+a[0].color),_=null,1==a.length){var i=document.getElementById(n),c=i.width,s=i.height;!1!==THREE.Math.isPowerOfTwo(c)&&!1!==THREE.Math.isPowerOfTwo(s)||(c=nearest_pow2(c),s=nearest_pow2(s));var d=document.getElementById("sk_canvas_text_sample");styleSet&&(d.setAttribute("width",c),d.setAttribute("height",s)),context=d.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,c,s),context.drawImage(i,0,0,c,s),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){var n=[];"secondary_shoulder"==e?(n.push("shoulder_1"),n.push("shoulder_2")):"tshirt_inner"==e?n.push("tshirt_inner"):"shoulder_plain"==e?n.push("shoulder_plain"):"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_design"==e?n.push("back_design"):"primary"==e?(n.push("primary_1"),n.push("primary_2")):"secondary_mascot"==e?(n.push("mascot_1"),n.push("mascot_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"chest_ring"==e?n.push("chest_ring"):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"star"==e?(n.push("back_star"),n.push("star")):"shoulder_star"==e?n.push("shoulder_star"):"back_line"==e?n.push("back_line"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)})}else{var m=new Image;m.addEventListener?m.addEventListener("load",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",r,"#"+a[1].color),m=null,3==a.length)if("S4"==loaded_style)(_=new Image).addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}}),_.src=a[2].src;else{var _=new Image;_.addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}}),_.src=a[2].src}else{var i=document.getElementById(n),c=document.getElementById(r),s=i.width,d=i.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",s),h.setAttribute("height",d)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(i,0,0,s,d),context.drawImage(c,0,0,s,d),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"back_design"==e?n.push("back_design"):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_line"==e?n.push("back_line"):"shoulder_pattern"==e?(n.push("shoulder_pattern_1"),n.push("shoulder_pattern_2"),n.push("primary_1"),n.push("primary_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"primary"==e&&(n.push("primary_1"),n.push("primary_2")),BindTextureToMesh(a,n,t,o)})}},!1):m.attachEvent&&m.attachEvent("onload",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",r,"#"+a[1].color),m=null,3==a.length)if("S4"==loaded_style)(_=new Image).addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}}),_.src=a[2].src;else{var _=new Image;_.addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}}),_.src=a[2].src}else{var i=document.getElementById(n),c=document.getElementById(r),s=i.width,d=i.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",s),h.setAttribute("height",d)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(i,0,0,s,d),context.drawImage(c,0,0,s,d),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"back_design"==e?n.push("back_design"):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_line"==e?n.push("back_line"):"shoulder_pattern"==e?(n.push("shoulder_pattern_1"),n.push("shoulder_pattern_2"),n.push("primary_1"),n.push("primary_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"primary"==e&&(n.push("primary_1"),n.push("primary_2")),BindTextureToMesh(a,n,t,o)})}}),m.src=a[1].src}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage1)if(loadedImage1=!0,colorImage(_,"sk_canvas_img1",n,"#"+a[0].color),_=null,1==a.length){var i=document.getElementById(n),c=i.width,s=i.height;!1!==THREE.Math.isPowerOfTwo(c)&&!1!==THREE.Math.isPowerOfTwo(s)||(c=nearest_pow2(c),s=nearest_pow2(s));var d=document.getElementById("sk_canvas_text_sample");styleSet&&(d.setAttribute("width",c),d.setAttribute("height",s)),context=d.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,c,s),context.drawImage(i,0,0,c,s),THREE.ImageUtils.loadTexture(d.toDataURL("image/jpg"),void 0,function(a){var n=[];"secondary_shoulder"==e?(n.push("shoulder_1"),n.push("shoulder_2")):"tshirt_inner"==e?n.push("tshirt_inner"):"shoulder_plain"==e?n.push("shoulder_plain"):"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_design"==e?n.push("back_design"):"primary"==e?(n.push("primary_1"),n.push("primary_2")):"secondary_mascot"==e?(n.push("mascot_1"),n.push("mascot_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"chest_ring"==e?n.push("chest_ring"):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"star"==e?(n.push("back_star"),n.push("star")):"shoulder_star"==e?n.push("shoulder_star"):"back_line"==e?n.push("back_line"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)})}else{var m=new Image;m.addEventListener?m.addEventListener("load",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",r,"#"+a[1].color),m=null,3==a.length)if("S4"==loaded_style)(_=new Image).addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}}),_.src=a[2].src;else{var _=new Image;_.addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}}),_.src=a[2].src}else{var i=document.getElementById(n),c=document.getElementById(r),s=i.width,d=i.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",s),h.setAttribute("height",d)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(i,0,0,s,d),context.drawImage(c,0,0,s,d),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"back_design"==e?n.push("back_design"):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_line"==e?n.push("back_line"):"shoulder_pattern"==e?(n.push("shoulder_pattern_1"),n.push("shoulder_pattern_2"),n.push("primary_1"),n.push("primary_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"primary"==e&&(n.push("primary_1"),n.push("primary_2")),BindTextureToMesh(a,n,t,o)})}},!1):m.attachEvent&&m.attachEvent("onload",function(){if(!loadedImage2)if(loadedImage2=!0,colorImage(m,"sk_canvas_img2",r,"#"+a[1].color),m=null,3==a.length)if("S4"==loaded_style)(_=new Image).addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=new Image;i.addEventListener?i.addEventListener("load",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}},!1):i.attachEvent&&i.attachEvent("onload",function(){if(!loadedImage4){loadedImage4=!0;var a=document.getElementById(n),_=document.getElementById(r),c=document.getElementById(l),s=a.width,d=a.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var m=document.getElementById("sk_canvas_text_sample");m.width=s,m.height=d,context=m.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(a,0,0,s,d),context.drawImage(_,0,0,s,d),context.drawImage(c,0,0,s,d),context.drawImage(i,0,0,s,d),THREE.ImageUtils.loadTexture(m.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),i=null,BindTextureToMesh(a,n,t,o)})}}),i.src=SKIN_URL+"media/texture/s4_short_4.png"}}),_.src=a[2].src;else{var _=new Image;_.addEventListener?_.addEventListener("load",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}},!1):_.attachEvent&&_.attachEvent("onload",function(){if(!loadedImage3){loadedImage3=!0,colorImage(_,"sk_canvas_img3",l,"#"+a[2].color);var i=document.getElementById(n),c=document.getElementById(r),s=document.getElementById(l),d=i.width,m=i.height;!1!==THREE.Math.isPowerOfTwo(d)&&!1!==THREE.Math.isPowerOfTwo(m)||(d=nearest_pow2(d),m=nearest_pow2(m));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",d),h.setAttribute("height",m)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,d,m),context.drawImage(i,0,0,d,m),context.drawImage(c,0,0,d,m),context.drawImage(s,0,0,d,m),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"neck_pattern"==e?(n.push("neck_pattern"),n.push("neck_pattern_1"),n.push("neck_pattern_2")):"short_pattern"==e&&(n.push("left_pattern"),n.push("right_pattern")),BindTextureToMesh(a,n,t,o)}),_=null}}),_.src=a[2].src}else{var i=document.getElementById(n),c=document.getElementById(r),s=i.width,d=i.height;!1!==THREE.Math.isPowerOfTwo(s)&&!1!==THREE.Math.isPowerOfTwo(d)||(s=nearest_pow2(s),d=nearest_pow2(d));var h=document.getElementById("sk_canvas_text_sample");styleSet&&(h.setAttribute("width",s),h.setAttribute("height",d)),context=h.getContext("2d"),imageSmoothingEnabled(context,!0),pattern=context.createPattern(bgPlainColor,"repeat"),context.fillStyle=pattern,context.fillRect(0,0,s,d),context.drawImage(i,0,0,s,d),context.drawImage(c,0,0,s,d),THREE.ImageUtils.loadTexture(h.toDataURL("image/jpg"),void 0,function(a){var n=[];"back_design"==e?n.push("back_design"):"dot_line"==e?(n.push("dot_line_1"),n.push("dot_line_2"),n.push("dot_line_3"),n.push("dot_line_4"),n.push("dot_line_5")):"back_line"==e?n.push("back_line"):"shoulder_pattern"==e?(n.push("shoulder_pattern_1"),n.push("shoulder_pattern_2"),n.push("primary_1"),n.push("primary_2")):"mascot"==e?(n.push("front_logo"),n.push("back_logo"),n.push("left_mascot"),n.push("right_mascot")):"front_logo"==e?n.push("front_logo"):"back_logo"==e?n.push("back_logo"):"shorts_mascot"==e?(n.push("left_mascot"),n.push("right_mascot")):"primary"==e&&(n.push("primary_1"),n.push("primary_2")),BindTextureToMesh(a,n,t,o)})}}),m.src=a[1].src}}),_.src=a[0].src}function getMaterial(e,a,t){if(t){var o=["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position =   projectionMatrix *   modelViewMatrix *  vec4(position,1.0);"," }"].join("\n"),n=["uniform sampler2D texture1;","varying vec2 vUv;","void main() {"," gl_FragColor = texture2D(texture1, vUv);"," }"].join("\n"),r={},l={texture1:{type:"t",value:a}};return new THREE.ShaderMaterial({uniforms:l,attributes:r,vertexShader:o,fragmentShader:n,blending:THREE.NormalBlending,opacity:.1,fog:!t,transparent:t,alphaTest:.5,shininess:1,side:THREE.FrontSide})}var _=new THREE.MeshPhongMaterial({map:a});return _.needsUpdate=!0,_.side="tshirt_inner"==e?THREE.BackSide:THREE.DoubleSide,_.opacity=1,_.shininess=1,_.transparency=!1,_.reflectivity=0,_.alphaTest=.1,_}function BindTextureToMesh(e,a,t,o){e.wrapS=e.wrapT=THREE.RepeatWrapping,e.anisotropy=renderer.getMaxAnisotropy(),e.magFilter=THREE.NearestFilter,e.minFilter=THREE.LinearMipMapLinearFilter;var n,r;for(r=0;r<a.length;r++){var l=a[r];n="tshirt_inner"!=l&&"tshirt_body"!=l&&"tshirt_body_neck"!=l&&"short_body"!=l&&"collar_back"!=l&&"collar"!=l&&"back_logo"!=l&&"left_mascot"!=l&&"right_mascot"!=l?getMaterial(l,e,!0):getMaterial(l,e,!1);var _=model.getObjectByName(l,!0);if(null!=_){var i=_.children[0];i.name=_.name,i.scale=_.scale,i.geometry.buffersNeedUpdate=!0,i.geometry.uvsNeedUpdate=!0,i.buffersNeedUpdate=!0,i.uvsNeedUpdate=!0,i.material.needsUpdate=!0,i.material=n}}t?LoadMesh():changeMeshArray.length>1?(changeMeshArray.splice(0,1),CallDrawImage()):(render(),HideLoader())}function CallDrawImage(){calledDrawImage=!0;var e=changeMeshArray[0],a=[];if("front_logo"==e||"back_logo"==e||"shorts_mascot"==e){var t="";t="shorts_mascot"==e?mesh_config_array.mascot.replace("mascots_",""):mesh_config_array[e].replace("mascots_","");var o=color_config_array[mesh_config_array.primary].main,n=color_config_array[mesh_config_array.secondary].main;"back_logo"==e&&"S6"==loaded_style&&(o=color_config_array[mesh_config_array.secondary].main,n=color_config_array[mesh_config_array.primary].main),a=[{color:o,src:SKIN_URL+"media/logo/mascots_"+t+"_1.png"}],"4"!=t&&"7"!=t&&"18"!=t&&"20"!=t&&"29"!=t&&"34"!=t&&"36"!=t&&a.push({color:n,src:SKIN_URL+"media/logo/mascots_"+t+"_2.png"})}else"chest_ring"==e?a=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/plain.png"}]:"secondary_mascot"==e?a=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}]:"primary"==e?a="S1"==loaded_style?[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/primary_"+loaded_style.toLowerCase()+"_mascot.png"}]:[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/plain.png"}]:"secondary_plain"==e?(e="secondary_shoulder",a=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/plain.png"}]):"secondary_shoulder"==e?a=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/secondary_"+loaded_style.toLowerCase()+"_shoulder.png"}]:"shoulder_star"==e?a=[{color:color_config_array[mesh_config_array.primary].dark,src:SKIN_URL+"media/texture/plain.png"}]:"star"==e?a=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_star.png"}]:"shoulder_pattern"==e?a="S7"==loaded_style?[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/secondary_s7_shoulder.png"}]:[{color:color_config_array[mesh_config_array.primary].dark,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_pattern_dark.png"},{color:color_config_array[mesh_config_array.primary].light,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_pattern_light.png"}]:"neck_pattern"==e?"S5"==loaded_style?a=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_neck_3.png"}]:"S2"==loaded_style&&(a=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/s2_pattern.png"}]):"short_pattern"==e?"S4"==loaded_style?a=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S5"==loaded_style?a=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S7"==loaded_style?a=[{color:color_config_array[mesh_config_array.tertiary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_1.png"},{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_2.png"},{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short_3.png"}]:"S6"==loaded_style?a=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_short.png"}]:"S2"==loaded_style&&(a=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/s2_short.png"}]):"shoulder_plain"==e?"S6"==loaded_style?a=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/"+loaded_style.toLowerCase()+"_shoulder.png"}]:"S4"==loaded_style&&(a=[{color:color_config_array[mesh_config_array.primary].main,src:SKIN_URL+"media/texture/plain.png"}]):"dot_line"==e&&(a=[{color:color_config_array[mesh_config_array.secondary].main,src:SKIN_URL+"media/texture/s2_dot_plain.png"},{color:color_config_array[mesh_config_array.tshirt_body].main,src:SKIN_URL+"media/texture/s2_dot.png"}]);a.length>0?DrawChangeImage(e,a,!1,!0):"front_name"==e?FillTextName($("#txt_team_name").val(),"team_name",mesh_config_array.team_name_font,mesh_config_array.team_name_color,mesh_config_array.team_name_border,mesh_config_array.team_name_layout,mesh_config_array.team_name_bold):"number"==e?FillTextName($("#txt_number").val(),"number",mesh_config_array.number_font,mesh_config_array.number_color,mesh_config_array.number_border,"",mesh_config_array.number_bold):"back_name"==e&&FillTextName($("#txt_player_name").val(),"player_name",mesh_config_array.player_name_font,mesh_config_array.player_name_color,mesh_config_array.player_name_border,mesh_config_array.player_name_layout,mesh_config_array.player_name_bold)}function colorImage(e,a,t,o){var n=e.width,r=e.height;"sk_canvas_s2"!=t&&(!1!==THREE.Math.isPowerOfTwo(n)&&!1!==THREE.Math.isPowerOfTwo(r)||(n=nearest_pow2(n),r=nearest_pow2(r)));var l=document.getElementById(t);l.width=n,l.height=r;var _=l.getContext("2d");imageSmoothingEnabled(_,!0),_.clearRect(0,0,l.width,l.height),_.drawImage(e,0,0,n,r);for(var i=_.getImageData(0,0,l.width,l.height),c=i.data,s=hexToRgb(o),d=0,m=c.length;d<m;d+=4)0!=c[d+3]&&(c[d+0]=s.r,c[d+1]=s.g,c[d+2]=s.b,c[d+3]=255);_.putImageData(i,0,0)}var SCREEN_WIDTH,SCREEN_HEIGHT,CANVAS_WIDTH,CANVAS_HEIGHT,CANVAS_WIDTH_TEXT,CANVAS_HEIGHT_TEXT,canvas_height,canvas_width,loaded_screen_width,bgColor,bgPlainColor,s2_name_image,s2_number_image,isUploadedMascot=!1,isUploadedFront=!1,isUploadedBack=!1,firstLoad=!0,styleSet=!0,config=[],basePrice=69,baseFrontLogoPrice=16,baseBackLogoPrice=16,baseMascotPrice=4,frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,bodyBackgroundImage,back_view_box,spn_elem,img_elem,tname_type,pname_type,number_type,front_logo_type,back_logo_type,mascot_type,changed_team_layout,changed_player_layout,chk_elem="<img src="+SKIN_URL+'"images/check.png" alt="selected" class="sk_chk_elem"/>',img_chk_elem='<div class="style_check"> <img src='+SKIN_URL+'"images/check.png" alt="selected" /> </div>',change_color_type,border_color_type,mesh_counter,fabric_cloth,tshirt_body,short_body,collar,change_layout_elem,change_color_elem,change_font_elem,change_logo_elem,change_color_elem_color,loaded_style="S1",isFilling=!0,is_mobile=!1,loadedAgain=!1,loadedOnceAgain=!1,model_zoomed=!1,font_change_array,team_name_font,player_name_font,number_font,mY=0,loadedImage1,loadedImage2,loadedImage3,loadedImage4,changeMeshArray=[],mesh_config_array,mesh_config_array_object,color_config_array,calledDrawImage=!1,mesh_bind,mesh_config,scaleX=93,scaleY=72,scaleZ=75,windowHalfXExtra,theCanvas,container,controls,camera,scene,renderer,cross,model;$(document).ready(function(){LoadColorConfig(),LoadMeshConfig(),fabric_cloth="dri_feel",mesh_counter=-1,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",mascot_type="full_front",back_logo_type="upper_back",back_view_box="div_sk_panel_main",loaded_screen_width=0,CANVAS_HEIGHT_TEXT=600,CANVAS_WIDTH_TEXT=512,SetHeight(),IsWebGL()&&($("#txt_team_name").on("input",function(){FillTeamName()}),$("#txt_player_name").on("input",function(){FillPlayerName()}),$("#btn_open").click(function(){ShowHide(!0)}),$("#btn_close").click(function(){ShowHide(!1)}),$("#txt_number").on("input",function(){var e=$(this).val();e.length>3&&$(this).val(e.substring(0,3)),FillNumber()}),$(".a_sk_action").click(function(){var e=$(this).attr("data-val");console.log(e),"back"==e?($(".sk_other_box").hide(),$("#"+back_view_box).show(),back_view_box="div_sk_panel_main"):($("#div_sk_panel_main").hide(),$("#div_sk_panel_"+e).show(),"team_name"==e?($('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked")):"player_name"==e?($('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked")):"number"==e?($('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked")):"front_logo"==e?($('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked")):"back_logo"==e?($('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked")):"shorts_mascot"==e&&($('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked")))}),$(".div_sk_style_label_img").click(function(){var e=$(this).next().attr("data-val");e!==loaded_style&&($("#div_sk_panel_style").find(".style_check").remove(),$(this).prepend(img_chk_elem),frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,SetPrice(),$(".div_sk_style_label").removeClass("style-lable_active").addClass("style-lable"),$(this).next().addClass("style-lable_active"),loaded_style=e,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",back_logo_type="upper_back",mascot_type="full_front",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked"),mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],ShowLoader(),mesh_counter=-1,ShowHide(!1),installModel(loaded_style.toUpperCase()+".js","#D1D1DC"))}),$(".div_sk_style_label").click(function(){var e=$(this).attr("data-val");if(e!==loaded_style){$("#div_sk_panel_style").find(".style_check").remove();var a=$(this).parent().children()[0];$(a).prepend(img_chk_elem),frontLogoPrice=0,backLogoPrice=0,mascotPrice=0,SetPrice(),$(".div_sk_style_label").removeClass("style-lable_active").addClass("style-lable"),$(this).addClass("style-lable_active"),loaded_style=e,tname_type="full_front",pname_type="",number_type="under",front_logo_type="",back_logo_type="upper_back",mascot_type="full_front",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').attr("checked","checked"),$('input[name="rdo_number"][value="'+number_type+'"]').prop("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').attr("checked","checked"),$('input[name="rdo_shorts_mascot"][value="'+mascot_type+'"]').prop("checked","checked"),mesh_config_array=mesh_config_array_object[loaded_style],mesh_bind=mesh_config[loaded_style],ShowLoader(),mesh_counter=-1,ShowHide(!1),installModel(loaded_style.toUpperCase()+".js","#D1D1DC")}}),$(".div_sk_fabric_label").click(function(){var e=$(this).attr("data-val");if(fabric_cloth!=e){$("#div_sk_panel_fabric").find(".style_check").remove(),$(".div_sk_fabric_label").removeClass("style-lable_active").addClass("style-lable"),$(this).addClass("style-lable_active");var a=$(this).parent().children()[0];$(a).prepend(img_chk_elem),fabric_cloth=e,SetCloth()}}),$(".div_sk_fabric_label_img").click(function(){var e=$(this).attr("data-val");fabric_cloth!=e&&($("#div_sk_panel_fabric").find(".style_check").remove(),$(".div_sk_fabric_label").removeClass("style-lable_active").addClass("style-lable"),$(this).prepend(img_chk_elem),$(this).next().addClass("style-lable_active"),fabric_cloth=e,SetCloth())}),$(".btn_sk_color_label").click(function(){back_view_box="div_sk_panel_colors",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_colors").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_team_name_label").click(function(){back_view_box="div_sk_panel_team_name",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_team_name").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_player_name_label").click(function(){back_view_box="div_sk_panel_player_name",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_player_name").hide(),$("#div_sk_panel_select_colors").show()}),$(".btn_sk_number_label").click(function(){back_view_box="div_sk_panel_number",spn_elem=$(this).find(".btn-label"),console.log(spn_elem),change_color_elem=$(this).attr("data-val"),SetSelectedColor(),$("#div_sk_panel_number").hide(),$("#div_sk_panel_select_colors").show()}),$(".div_sk_select_color_label").click(function(){SelectColor(this)}),$('input[name="rdo_back_logo"]').change(function(){back_logo_type=$(this).val();var e=model.getObjectByName("back_name",!0),a=model.getObjectByName("back_logo",!0),t=model.getObjectByName("back_number",!0),o=model.getObjectByName("back_number_1",!0),n=model.getObjectByName("back_name_bowtie",!0),r=model.getObjectByName("back_name_lower",!0),l=model.getObjectByName("back_name_upper",!0),_=model.getObjectByName("back_name_arch",!0);if(""==back_logo_type)null!=a&&((i=a.children[0]).visible=!1),null!=t&&((i=t.children[0]).visible=!0),null!=o&&((i=o.children[0]).visible=!1);else if("upper_back"==back_logo_type&&(pname_type="",$('input[name="rdo_pname"][value="'+pname_type+'"]').attr("checked","checked"),$('input[name="rdo_pname"][value="'+pname_type+'"]').prop("checked","checked"),null!=e&&(e.children[0].visible=!1),null!=n&&(n.children[0].visible=!1),null!=r&&(r.children[0].visible=!1),null!=l&&(l.children[0].visible=!1),null!=_&&(_.children[0].visible=!1),null!=a&&((i=a.children[0]).visible=!0),null!=t&&((i=t.children[0]).visible=!0),null!=o)){var i=o.children[0];i.visible=!1}render()}),$('input[name="rdo_shorts_mascot"]').change(function(){mascot_type=$(this).val();var e=model.getObjectByName("left_mascot",!0),a=model.getObjectByName("right_mascot",!0);if(""==mascot_type)null!=e&&((t=e.children[0]).visible=!1),null!=a&&((o=a.children[0]).visible=!1);else if("full_front"==mascot_type){if(null!=e){var t=e.children[0];t.visible=!0}if(null!=a){var o=a.children[0];o.visible=!0}}render()}),$('input[name="rdo_front_logo"]').change(function(){front_logo_type=$(this).val();var e=model.getObjectByName("front_name",!0),a=model.getObjectByName("front_name_left",!0),t=model.getObjectByName("front_name_bowtie",!0),o=model.getObjectByName("front_name_lower",!0),n=model.getObjectByName("front_name_upper",!0),r=model.getObjectByName("front_name_left_bowtie",!0),l=model.getObjectByName("front_name_left_lower",!0),_=model.getObjectByName("front_name_left_upper",!0),i=model.getObjectByName("front_name_arch",!0),c=model.getObjectByName("front_name_left_arch",!0),s=model.getObjectByName("front_logo",!0);if(""==front_logo_type)null!=s&&((d=s.children[0]).visible=!1);else if("full_front"==front_logo_type&&(tname_type="",$('input[name="rdo_tname"][value="'+tname_type+'"]').attr("checked","checked"),$('input[name="rdo_tname"][value="'+tname_type+'"]').prop("checked","checked"),null!=e&&(e.children[0].visible=!1),null!=a&&(a.children[0].visible=!1),null!=t&&(t.children[0].visible=!1),null!=o&&(o.children[0].visible=!1),null!=n&&(n.children[0].visible=!1),null!=r&&(r.children[0].visible=!1),null!=l&&(l.children[0].visible=!1),null!=_&&(_.children[0].visible=!1),null!=i&&(i.children[0].visible=!1),null!=c&&(c.children[0].visible=!1),null!=s)){var d=s.children[0];d.visible=!0}render()}),$('input[name="rdo_tname"]').change(function(){tname_type=$(this).val();var e=model.getObjectByName("front_name",!0),a=model.getObjectByName("front_name_left",!0),t=model.getObjectByName("front_name_bowtie",!0),o=model.getObjectByName("front_name_lower",!0),n=model.getObjectByName("front_name_upper",!0),r=model.getObjectByName("front_name_left_bowtie",!0),l=model.getObjectByName("front_name_left_lower",!0),_=model.getObjectByName("front_name_left_upper",!0),i=model.getObjectByName("front_name_arch",!0),c=model.getObjectByName("front_name_left_arch",!0),s=model.getObjectByName("front_logo",!0),d=model.getObjectByName("front_logo_left",!0);if(null!=e&&((u=e.children[0]).visible=!1),null!=a&&((k=a.children[0]).visible=!1),null!=t&&((m=t.children[0]).visible=!1),null!=o&&((h=o.children[0]).visible=!1),null!=n&&((g=n.children[0]).visible=!1),null!=r&&((f=r.children[0]).visible=!1),null!=l&&((y=l.children[0]).visible=!1),null!=_&&((b=_.children[0]).visible=!1),null!=i&&((p=i.children[0]).visible=!1),null!=c&&((v=c.children[0]).visible=!1),"full_front"==tname_type){if(front_logo_type="",$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),"bowtie"==changed_team_layout){if(null!=t){var m=t.children[0];m.visible=!0}}else if("arch_lower"==changed_team_layout){if(null!=o){var h=o.children[0];h.visible=!0}}else if("arch_upper"==changed_team_layout){if(null!=n){var g=n.children[0];g.visible=!0}}else if("arch"==changed_team_layout){if(null!=i){var p=i.children[0];p.visible=!0}}else null!=e&&((u=e.children[0]).visible=!0);null!=a&&((k=a.children[0]).visible=!1),null!=s&&((w=s.children[0]).visible=!1),null!=d&&((E=d.children[0]).visible=!1)}else if("left_chest"==tname_type){if(front_logo_type="",$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_front_logo"][value="'+front_logo_type+'"]').prop("checked","checked"),null!=e){var u=e.children[0];u.visible=!1}if("bowtie"==changed_team_layout){if(null!=r){var f=r.children[0];f.visible=!0}}else if("arch_lower"==changed_team_layout){if(null!=l){var y=l.children[0];y.visible=!0}}else if("arch_upper"==changed_team_layout){if(null!=_){var b=_.children[0];b.visible=!0}}else if("arch"==changed_team_layout){if(null!=c){var v=c.children[0];v.visible=!0}}else if(null!=a){var k=a.children[0];k.visible=!0}if(null!=s){var w=s.children[0];w.visible=!1}if(null!=d){var E=d.children[0];E.visible=!1}}render()}),$('input[name="rdo_pname"]').change(function(){pname_type=$(this).val();var e=model.getObjectByName("back_name",!0),a=model.getObjectByName("back_logo",!0),t=model.getObjectByName("back_number",!0),o=model.getObjectByName("back_number_1",!0),n=model.getObjectByName("back_name_bowtie",!0),r=model.getObjectByName("back_name_lower",!0),l=model.getObjectByName("back_name_upper",!0),_=model.getObjectByName("back_name_arch",!0);if(""==pname_type)null!=e&&((m=e.children[0]).visible=!1),null!=n&&((i=n.children[0]).visible=!1),null!=r&&((c=r.children[0]).visible=!1),null!=l&&((s=l.children[0]).visible=!1),null!=_&&((d=_.children[0]).visible=!1),""!=number_type&&(null!=t&&((h=t.children[0]).visible=!0),null!=o&&((h=o.children[0]).visible=!1));else if("upper_back"==pname_type){if(back_logo_type="",$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').attr("checked","checked"),$('input[name="rdo_back_logo"][value="'+back_logo_type+'"]').prop("checked","checked"),"bowtie"==changed_player_layout){if(null!=n){var i=n.children[0];i.visible=!0}}else if("arch_lower"==changed_player_layout){if(null!=r){var c=r.children[0];c.visible=!0}}else if("arch_upper"==changed_player_layout){if(null!=l){var s=l.children[0];s.visible=!0}}else if("arch"==changed_player_layout){if(null!=_){var d=_.children[0];d.visible=!0}}else if(null!=e){var m=e.children[0];m.visible=!0}if(null!=a&&(a.children[0].visible=!1),"S7"==loaded_style&&""!=number_type){if(null!=t){var h=t.children[0];h.visible=!1}null!=o&&(o.children[0].visible=!0)}}render()}),$('input[name="rdo_number"]').change(function(){number_type=$(this).val();var e=model.getObjectByName("front_number",!0),a=model.getObjectByName("front_number_left",!0),t=model.getObjectByName("back_number",!0),o=model.getObjectByName("back_number_1",!0);if(""==number_type)null!=e&&((n=e.children[0]).visible=!1),null!=a&&((r=a.children[0]).visible=!1),null!=t&&((l=t.children[0]).visible=!1),null!=o&&((l=o.children[0]).visible=!1);else if("under"==number_type)null!=e&&((n=e.children[0]).visible=!0),null!=a&&((r=a.children[0]).visible=!1),"S7"==loaded_style?""==pname_type?(null!=t&&((l=t.children[0]).visible=!0),null!=o&&((l=o.children[0]).visible=!1)):(null!=t&&((l=t.children[0]).visible=!1),null!=o&&((l=o.children[0]).visible=!0)):null!=t&&((l=t.children[0]).visible=!0);else if("heart"==number_type){if(null!=e){var n=e.children[0];n.visible=!1}if(null!=a){var r=a.children[0];r.visible=!0}if("S7"==loaded_style)""==pname_type?(null!=t&&((l=t.children[0]).visible=!0),null!=o&&((l=o.children[0]).visible=!1)):(null!=t&&((l=t.children[0]).visible=!1),null!=o&&((l=o.children[0]).visible=!0));else if(null!=t){var l=t.children[0];l.visible=!0}}render()}),$(".btn_sk_font_label").click(function(){var e=$(this).attr("data-val");change_font_elem=e,"team_name"==e?($("#img_select_font").attr("src",SKIN_URL+"images/team.png"),$("#headin_select_font").html("Team Name > Fonts")):"player_name"==e?($("#img_select_font").attr("src",SKIN_URL+"images/player.png"),$("#headin_select_font").html("Player Name > Fonts")):"number"==e&&($("#img_select_font").attr("src",SKIN_URL+"images/number.png"),$("#headin_select_font").html("Number > Fonts")),back_view_box="div_sk_panel_"+e,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedFont(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_fonts").show()}),$(".font-pick>ul>li").click(function(){SelectFont($(this).find(".a_sk_select_font_label"))}),$(".btn_sk_logo_label").click(function(){var e=$(this).attr("data-val");change_logo_elem=e,img_elem=$("#img_preview_"+e),"front_logo"==e?($("#img_select_logo").attr("src",SKIN_URL+"images/front_logo.png"),$(img_elem).attr("src",SKIN_URL+"images/"+mesh_config_array.front_logo+".jpg")):"back_logo"==e?($("#img_select_logo").attr("src",SKIN_URL+"images/back_logo.png"),$(img_elem).attr("src",SKIN_URL+"images/"+mesh_config_array.back_logo+".jpg")):"shorts_mascot"==e&&($("#img_select_logo").attr("src",SKIN_URL+"images/shorts.png"),$(img_elem).attr("src",SKIN_URL+"images/"+mesh_config_array.mascot+".jpg")),back_view_box="div_sk_panel_"+e,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedLogo(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_logo").show()}),$(".a_sk_select_logo_label").click(function(){SelectLogo(this)}),$(".btn_sk_layout_label").click(function(){"team_name"==(change_layout_elem=$(this).attr("data-val"))?($("#img_select_layout").attr("src",SKIN_URL+"images/team.png"),$("#headin_select_layout").html("Team Name > Layout")):"player_name"==change_layout_elem&&($("#img_select_layout").attr("src",SKIN_URL+"images/player.png"),$("#headin_select_layout").html("Player Name > Layout")),back_view_box="div_sk_panel_"+change_layout_elem,spn_elem=$(this).find(".btn-label"),console.log(spn_elem),SetSelectedLayout(),$("#"+back_view_box).hide(),$("#div_sk_panel_select_layout").show()}),$(".a_sk_select_layout_label").click(function(){SelectLayout(this)}),$('input[type="file"]').change(function(){if(console.log($(this).attr("data-val")),console.log($(this).val()),void 0===window.FileReader)alert("Browser does not support HTML5 file uploads!");else if(change_logo_elem=$(this).attr("data-val"),this.files&&this.files[0]){var e=new FileReader;e.addEventListener?e.addEventListener("load",function(e){"shorts_mascot"==change_logo_elem?(mascotPrice=baseMascotPrice,isUploadedMascot=!0):"front_logo"==change_logo_elem?(frontLogoPrice=baseFrontLogoPrice,isUploadedFront=!0):"back_logo"==change_logo_elem&&(backLogoPrice=baseBackLogoPrice,isUploadedBack=!0),SetPrice();var a=new Image;a.addEventListener?a.addEventListener("load",function(){var e=a.width,t=a.height;!1!==THREE.Math.isPowerOfTwo(e)&&!1!==THREE.Math.isPowerOfTwo(t)||(e=nearest_pow2(e),t=nearest_pow2(t));var o=document.getElementById("sk_canvas_text");styleSet&&(o.setAttribute("width",e),o.setAttribute("height",t));var n=o.getContext("2d");imageSmoothingEnabled(n,!0),pattern=n.createPattern(bgPlainColor,"repeat"),n.fillStyle=pattern,n.fillRect(0,0,e,t),n.drawImage(a,0,0,e,t),$("#img_preview_"+change_logo_elem).attr("src",o.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(o.toDataURL("image/jpg"),void 0,function(e){ShowHide(!1);var a=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(a=["left_mascot","right_mascot"]),BindTextureToMesh(e,a,!1,!0)})},!1):a.attachEvent&&a.attachEvent("onload",function(){var e=a.width,t=a.height;!1!==THREE.Math.isPowerOfTwo(e)&&!1!==THREE.Math.isPowerOfTwo(t)||(e=nearest_pow2(e),t=nearest_pow2(t));var o=document.getElementById("sk_canvas_text");styleSet&&(o.setAttribute("width",e),o.setAttribute("height",t));var n=o.getContext("2d");imageSmoothingEnabled(n,!0),pattern=n.createPattern(bgPlainColor,"repeat"),n.fillStyle=pattern,n.fillRect(0,0,e,t),n.drawImage(a,0,0,e,t),$("#img_preview_"+change_logo_elem).attr("src",o.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(o.toDataURL("image/jpg"),void 0,function(e){ShowHide(!1);var a=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(a=["left_mascot","right_mascot"]),BindTextureToMesh(e,a,!1,!0)})}),a.src=e.target.result},!1):e.attachEvent&&e.attachEvent("onload",function(e){"shorts_mascot"==change_logo_elem?(mascotPrice=baseMascotPrice,isUploadedMascot=!0):"front_logo"==change_logo_elem?(frontLogoPrice=baseFrontLogoPrice,isUploadedFront=!0):"back_logo"==change_logo_elem&&(backLogoPrice=baseBackLogoPrice,isUploadedBack=!0),SetPrice();var a=new Image;a.addEventListener?a.addEventListener("load",function(){a.removeEventListener("load",this,!1),ShowHide(!1);var e=a.width,t=a.height;!1!==THREE.Math.isPowerOfTwo(e)&&!1!==THREE.Math.isPowerOfTwo(t)||(e=nearest_pow2(e),t=nearest_pow2(t));var o=document.getElementById("sk_canvas_text");styleSet&&(o.setAttribute("width",e),o.setAttribute("height",t));var n=o.getContext("2d");imageSmoothingEnabled(n,!0),pattern=n.createPattern(bgPlainColor,"repeat"),n.fillStyle=pattern,n.fillRect(0,0,e,t),n.drawImage(a,0,0,e,t),$("#img_preview_"+change_logo_elem).attr("src",o.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(o.toDataURL("image/jpg"),void 0,function(e){var a=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(a=["left_mascot","right_mascot"]),BindTextureToMesh(e,a,!1,!0)})},!1):a.attachEvent&&a.attachEvent("onload",function(){ShowHide(!1);var e=a.width,t=a.height;!1!==THREE.Math.isPowerOfTwo(e)&&!1!==THREE.Math.isPowerOfTwo(t)||(e=nearest_pow2(e),t=nearest_pow2(t));var o=document.getElementById("sk_canvas_text");styleSet&&(o.setAttribute("width",e),o.setAttribute("height",t));var n=o.getContext("2d");imageSmoothingEnabled(n,!0),pattern=n.createPattern(bgPlainColor,"repeat"),n.fillStyle=pattern,n.fillRect(0,0,e,t),n.drawImage(a,0,0,e,t),$("#img_preview_"+change_logo_elem).attr("src",o.toDataURL("image/jpg")),$("#img_preview_"+change_logo_elem).width(120),$("#img_preview_"+change_logo_elem).attr("width","120px"),THREE.ImageUtils.loadTexture(o.toDataURL("image/jpg"),void 0,function(e){var a=[change_logo_elem];"shorts_mascot"==change_logo_elem&&(a=["left_mascot","right_mascot"]),BindTextureToMesh(e,a,!1,!0)})}),a.src=e.target.result}),e.readAsDataURL(this.files[0])}}),SKInitCanvas(),animate())});